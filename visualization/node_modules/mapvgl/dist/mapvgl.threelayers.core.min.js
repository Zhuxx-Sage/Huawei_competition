(function(D,N){"object"===typeof exports&&"undefined"!==typeof module?N(exports,require("three"),require("three/examples/jsm/postprocessing/RenderPass"),require("three/examples/jsm/postprocessing/UnrealBloomPass"),require("three/examples/jsm/postprocessing/EffectComposer")):"function"===typeof define&&define.amd?define(["exports","three","three/examples/jsm/postprocessing/RenderPass","three/examples/jsm/postprocessing/UnrealBloomPass","three/examples/jsm/postprocessing/EffectComposer"],N):(D=D||self,
N(D.mapvgl=D.mapvgl||{},D.THREE,D.RenderPass,D.UnrealBloomPass,D.EffectComposer))})(this,function(D,N,Ra,mb,lc){function mc(){throw Error("Dynamic requires are not currently supported by rollup-plugin-commonjs");}function t(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}function q(a,b){return b={exports:{}},a(b,b.exports),b.exports}function ja(){}function nb(a,b){for(var d in b)a[d]=b[d]}function U(a,b){this.lng=a;this.lat=b}function ob(a,b){this.x=a;this.y=
b}function nc(a,b){return function(d){return b(a(d))}}function oc(a){var b=function(b){if(void 0===b||null===b)return b;1<arguments.length&&(b=Array.prototype.slice.call(arguments));return a(b)};"conversion"in a&&(b.conversion=a.conversion);return b}function pc(a){var b=function(b){if(void 0===b||null===b)return b;1<arguments.length&&(b=Array.prototype.slice.call(arguments));var c=a(b);if("object"===("undefined"===typeof c?"undefined":pb(c)))for(var e=c.length,d=0;d<e;d++)c[d]=Math.round(c[d]);return c};
"conversion"in a&&(b.conversion=a.conversion);return b}function A(a,b){if(!(this instanceof A))return new A(a,b);b&&b in qb&&(b=null);if(b&&!(b in I))throw Error("Unknown model: "+b);if("undefined"===typeof a)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(a instanceof A)this.model=a.model,this.color=a.color.slice(),this.valpha=a.valpha;else if("string"===typeof a){b=oa.get(a);if(null===b)throw Error("Unable to parse color from string: "+a);this.model=b.model;var d=I[this.model].channels;
this.color=b.value.slice(0,d);this.valpha="number"===typeof b.value[d]?b.value[d]:1}else if(a.length)this.model=b||"rgb",d=I[this.model].channels,b=Sa.call(a,0,d),this.color=Ta(b,d),this.valpha="number"===typeof a[d]?a[d]:1;else if("number"===typeof a)a&=16777215,this.model="rgb",this.color=[a>>16&255,a>>8&255,a&255],this.valpha=1;else{this.valpha=1;b=Y(a);"alpha"in a&&(b.splice(b.indexOf("alpha"),1),this.valpha="number"===typeof a.alpha?a.alpha:0);b=b.sort().join("");if(!(b in Ua))throw Error("Unable to parse color from object: "+
qc(a));this.model=Ua[b];d=I[this.model].labels;var c=[];for(b=0;b<d.length;b++)c.push(a[d[b]]);this.color=Ta(c)}if(Ca[this.model])for(d=I[this.model].channels,b=0;b<d;b++)(a=Ca[this.model][b])&&(this.color[b]=a(this.color[b]));this.valpha=Math.max(0,Math.min(1,this.valpha));rb&&rb(this)}function rc(a){return function(b){return Number(b.toFixed(a))}}function x(a,b,d){a=Array.isArray(a)?a:[a];a.forEach(function(a){(Ca[a]||(Ca[a]=[]))[b]=d});a=a[0];return function(c){if(arguments.length){d&&(c=d(c));
var e=this[a]();e.color[b]=c;return e}e=this[a]().color[b];d&&(e=d(e));return e}}function y(a){return function(b){return Math.max(0,Math.min(a,b))}}function Ta(a,b){for(var d=0;d<b;d++)"number"!==typeof a[d]&&(a[d]=0);return a}var sb=N=N&&N.hasOwnProperty("default")?N["default"]:N;window.THREE&&(sb=window.THREE);var r=sb,sc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ca=function(a){if(void 0==a)throw TypeError("Can't call method on  "+
a);return a},tc={}.hasOwnProperty,u=function(a,b){return tc.call(a,b)},w=q(function(a){a=a.exports={version:"2.6.5"};"number"==typeof __e&&(__e=a)}),F=q(function(a){a=a.exports="undefined"!=typeof window&&Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)}),pa=q(function(a){var b=F["__core-js_shared__"]||(F["__core-js_shared__"]={});(a.exports=function(a,c){return b[a]||(b[a]=void 0!==c?c:{})})("versions",[]).push({version:w.version,
mode:"pure",copyright:"\u00a9 2019 Denis Pushkarev (zloirock.ru)"})}),uc=0,vc=Math.random(),Da=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++uc+vc).toString(36))},tb=pa("keys"),Va=function(a){return tb[a]||(tb[a]=Da(a))},ub=Va("IE_PROTO"),wc=Object.prototype,vb=Object.getPrototypeOf||function(a){a=Object(ca(a));return u(a,ub)?a[ub]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?wc:null},xc=function(a){if("function"!=typeof a)throw TypeError(a+
" is not a function!");return a},Ea=function(a,b,d){xc(a);if(void 0===b)return a;switch(d){case 1:return function(c){return a.call(b,c)};case 2:return function(c,e){return a.call(b,c,e)};case 3:return function(c,e,d){return a.call(b,c,e,d)}}return function(){return a.apply(b,arguments)}},J=function(a){return"object"===typeof a?null!==a:"function"===typeof a},K=function(a){if(!J(a))throw TypeError(a+" is not an object!");return a},da=function(a){try{return!!a()}catch(b){return!0}},V=!da(function(){return 7!=
Object.defineProperty({},"a",{get:function(){return 7}}).a}),Fa=F.document,wb=J(Fa)&&J(Fa.createElement),xb=!V&&!da(function(){return 7!=Object.defineProperty(wb?Fa.createElement("div"):{},"a",{get:function(){return 7}}).a}),qa=function(a,b){if(!J(a))return a;var d,c;if(b&&"function"==typeof(d=a.toString)&&!J(c=d.call(a))||"function"==typeof(d=a.valueOf)&&!J(c=d.call(a))||!b&&"function"==typeof(d=a.toString)&&!J(c=d.call(a)))return c;throw TypeError("Can't convert object to primitive value");},yc=
Object.defineProperty,O={f:V?Object.defineProperty:function(a,b,d){K(a);b=qa(b,!0);K(d);if(xb)try{return yc(a,b,d)}catch(c){}if("get"in d||"set"in d)throw TypeError("Accessors not supported!");"value"in d&&(a[b]=d.value);return a}},Z=function(a,b){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:b}},ea=V?function(a,b,d){return O.f(a,b,Z(1,d))}:function(a,b,d){a[b]=d;return a},C=function(a,b,d){var c=a&C.F,e=a&C.G,g=a&C.S,f=a&C.P,h=a&C.B,k=a&C.W,l=e?w:w[b]||(w[b]={}),p=l.prototype;
g=e?F:g?F[b]:(F[b]||{}).prototype;var m;e&&(d=b);for(m in d)if(b=!c&&g&&void 0!==g[m],!b||!u(l,m)){var n=b?g[m]:d[m];l[m]=e&&"function"!=typeof g[m]?d[m]:h&&b?Ea(n,F):k&&g[m]==n?function(a){var b=function(b,e,c){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,e)}return new a(b,e,c)}return a.apply(this,arguments)};b.prototype=a.prototype;return b}(n):f&&"function"==typeof n?Ea(Function.call,n):n;f&&((l.virtual||(l.virtual={}))[m]=n,a&
C.R&&p&&!p[m]&&ea(p,m,n))}};C.F=1;C.G=2;C.S=4;C.P=8;C.B=16;C.W=32;C.U=64;C.R=128;var v=C,Ga=function(a,b){var d=(w.Object||{})[a]||Object[a],c={};c[a]=b(d);v(v.S+v.F*da(function(){d(1)}),"Object",c)};Ga("getPrototypeOf",function(){return function(a){return vb(Object(ca(a)))}});var zc=w.Object.getPrototypeOf,Ac=q(function(a){a.exports={"default":zc,__esModule:!0}}),P=t(Ac),Bc=q(function(a,b){b.__esModule=!0;b.default=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}}),z=t(Bc);v(v.S+v.F*!V,"Object",{defineProperty:O.f});var Cc=w.Object,Dc=function(a,b,d){return Cc.defineProperty(a,b,d)},ra=q(function(a){a.exports={"default":Dc,__esModule:!0}});t(ra);var Ec=q(function(a,b){b.__esModule=!0;var d=ra&&ra.__esModule?ra:{default:ra};b.default=function(){function a(a,b){for(var e=0;e<b.length;e++){var c=b[e];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);(0,d.default)(a,c.key,c)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}()}),
B=t(Ec),Fc=Math.ceil,Gc=Math.floor,Wa=function(a){return isNaN(a=+a)?0:(0<a?Gc:Fc)(a)},W={},Hc={}.toString,sa=function(a){return Hc.call(a).slice(8,-1)},yb=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==sa(a)?a.split(""):Object(a)},Q=function(a){return yb(ca(a))},Ic=Math.min,zb=function(a){return 0<a?Ic(Wa(a),9007199254740991):0},Jc=Math.max,Kc=Math.min,Lc=function(a){return function(b,d,c){b=Q(b);var e=zb(b.length);c=Wa(c);c=0>c?Jc(c+e,0):Kc(c,e);if(a&&d!=d)for(;e>c;){if(d=
b[c++],d!=d)return!0}else for(;e>c;c++)if((a||c in b)&&b[c]===d)return a||c||0;return!a&&-1}}(!1),Mc=Va("IE_PROTO"),Ab=function(a,b){a=Q(a);var d=0,c=[],e;for(e in a)e!=Mc&&u(a,e)&&c.push(e);for(;b.length>d;)u(a,e=b[d++])&&(~Lc(c,e)||c.push(e));return c},Ha="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),ka=Object.keys||function(a){return Ab(a,Ha)},Bb=V?Object.defineProperties:function(a,b){K(a);for(var d=ka(b),c=d.length,e=0,g;c>e;)O.f(a,
g=d[e++],b[g]);return a},Cb=F.document,Nc=Cb&&Cb.documentElement,Oc=Va("IE_PROTO"),Xa=function(){},Ia=function(){var a=wb?Fa.createElement("iframe"):{},b=Ha.length;a.style.display="none";Nc.appendChild(a);a.src="javascript:";a=a.contentWindow.document;a.open();a.write("<script>document.F=Object\x3c/script>");a.close();for(Ia=a.F;b--;)delete Ia.prototype[Ha[b]];return Ia()},fa=Object.create||function(a,b){if(null!==a){Xa.prototype=K(a);var d=new Xa;Xa.prototype=null;d[Oc]=a}else d=Ia();return void 0===
b?d:Bb(d,b)},E=q(function(a){var b=pa("wks"),d=F.Symbol,c="function"==typeof d;(a.exports=function(a){return b[a]||(b[a]=c&&d[a]||(c?d:Da)("Symbol."+a))}).store=b}),Pc=O.f,Db=E("toStringTag"),ta=function(a,b,d){a&&!u(a=d?a:a.prototype,Db)&&Pc(a,Db,{configurable:!0,value:b})},Eb={};ea(Eb,E("iterator"),function(){return this});var Qc=function(a,b,d){a.prototype=fa(Eb,{next:Z(1,d)});ta(a,b+" Iterator")},Ya=E("iterator"),Za=!([].keys&&"next"in[].keys()),Rc=function(){return this},Fb=function(a,b,d,c,
e,g,f){Qc(d,b,c);c=function(a){return!Za&&a in p?p[a]:function(){return new d(this,a)}};var h=b+" Iterator",k="values"==e,l=!1,p=a.prototype,m=p[Ya]||p["@@iterator"]||e&&p[e],n=m||c(e),r=e?k?c("entries"):n:void 0,q="Array"==b?p.entries||m:m,u;q&&(a=vb(q.call(new a)),a!==Object.prototype&&a.next&&ta(a,h,!0));k&&m&&"values"!==m.name&&(l=!0,n=function(){return m.call(this)});f&&(Za||l||!p[Ya])&&ea(p,Ya,n);W[b]=n;W[h]=Rc;if(e){var w={values:k?n:c("values"),keys:g?n:c("keys"),entries:r};if(f)for(u in w)u in
p||ea(p,u,w[u]);else v(v.P+v.F*(Za||l),b,w)}return w},Sc=function(a){return function(b,d){b=String(ca(b));d=Wa(d);var c=b.length,e;if(0>d||d>=c)return a?"":void 0;var g=b.charCodeAt(d);return 55296>g||56319<g||d+1===c||56320>(e=b.charCodeAt(d+1))||57343<e?a?b.charAt(d):g:a?b.slice(d,d+2):(g-55296<<10)+(e-56320)+65536}}(!0);Fb(String,"String",function(a){this._t=String(a);this._i=0},function(){var a=this._t,b=this._i;if(b>=a.length)return{value:void 0,done:!0};a=Sc(a,b);this._i+=a.length;return{value:a,
done:!1}});var Ja=function(a,b){return{value:b,done:!!a}};Fb(Array,"Array",function(a,b){this._t=Q(a);this._i=0;this._k=b},function(){var a=this._t,b=this._k,d=this._i++;return!a||d>=a.length?(this._t=void 0,Ja(1)):"keys"==b?Ja(0,d):"values"==b?Ja(0,a[d]):Ja(0,[d,a[d]])},"values");W.Arguments=W.Array;for(var Gb=E("toStringTag"),Hb="CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList".split(" "),
$a=0;$a<Hb.length;$a++){var ab=Hb[$a],Ib=F[ab],bb=Ib&&Ib.prototype;bb&&!bb[Gb]&&ea(bb,Gb,ab);W[ab]=W.Array}var cb={f:E},Tc=cb.f("iterator"),ua=q(function(a){a.exports={"default":Tc,__esModule:!0}});t(ua);var Jb=q(function(a){var b=Da("meta"),d=O.f,c=0,e=Object.isExtensible||function(){return!0},g=!da(function(){return e(Object.preventExtensions({}))}),f=function(a){d(a,b,{value:{i:"O"+ ++c,w:{}}})},h=a.exports={KEY:b,NEED:!1,fastKey:function(a,c){if(!J(a))return"symbol"==typeof a?a:("string"==typeof a?
"S":"P")+a;if(!u(a,b)){if(!e(a))return"F";if(!c)return"E";f(a)}return a[b].i},getWeak:function(a,c){if(!u(a,b)){if(!e(a))return!0;if(!c)return!1;f(a)}return a[b].w},onFreeze:function(a){g&&h.NEED&&e(a)&&!u(a,b)&&f(a);return a}}}),Uc=O.f,db=function(a){var b=w.Symbol||(w.Symbol={});"_"==a.charAt(0)||a in b||Uc(b,a,{value:cb.f(a)})},eb=Object.getOwnPropertySymbols,Ka={}.propertyIsEnumerable,Vc=Array.isArray||function(a){return"Array"==sa(a)},Wc=Ha.concat("length","prototype"),Kb=Object.getOwnPropertyNames||
function(a){return Ab(a,Wc)},Lb=Kb,Xc={}.toString,Mb="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Nb=function(a){if(Mb&&"[object Window]"==Xc.call(a))try{var b=Lb(a)}catch(d){b=Mb.slice()}else b=Lb(Q(a));return b},Ob=Object.getOwnPropertyDescriptor,La={f:V?Ob:function(a,b){a=Q(a);b=qa(b,!0);if(xb)try{return Ob(a,b)}catch(d){}if(u(a,b))return Z(!Ka.call(a,b),a[b])}},Yc=Jb.KEY,Pb=La.f,ha=O.f,Qb=Nb,G=F.Symbol,Ma=F.JSON,Na=Ma&&Ma.stringify,H=E("_hidden"),
Rb=E("toPrimitive"),Zc={}.propertyIsEnumerable,va=pa("symbol-registry"),X=pa("symbols"),wa=pa("op-symbols"),L=Object.prototype,la="function"==typeof G,fb=F.QObject,gb=!fb||!fb.prototype||!fb.prototype.findChild,hb=V&&da(function(){return 7!=fa(ha({},"a",{get:function(){return ha(this,"a",{value:7}).a}})).a})?function(a,b,d){var c=Pb(L,b);c&&delete L[b];ha(a,b,d);c&&a!==L&&ha(L,b,c)}:ha,Sb=function(a){var b=X[a]=fa(G.prototype);b._k=a;return b},ib=la&&"symbol"==typeof G.iterator?function(a){return"symbol"==
typeof a}:function(a){return a instanceof G},Oa=function(a,b,d){a===L&&Oa(wa,b,d);K(a);b=qa(b,!0);K(d);return u(X,b)?(d.enumerable?(u(a,H)&&a[H][b]&&(a[H][b]=!1),d=fa(d,{enumerable:Z(0,!1)})):(u(a,H)||ha(a,H,Z(1,{})),a[H][b]=!0),hb(a,b,d)):ha(a,b,d)},Tb=function(a,b){K(a);var d=b=Q(b),c=ka(d),e=eb;if(e){e=e(d);for(var g=Ka,f=0,h;e.length>f;)g.call(d,h=e[f++])&&c.push(h)}d=0;h=c.length;for(var k;h>d;)Oa(a,k=c[d++],b[k]);return a},$c=function(a){var b=Zc.call(this,a=qa(a,!0));return this===L&&u(X,a)&&
!u(wa,a)?!1:b||!u(this,a)||!u(X,a)||u(this,H)&&this[H][a]?b:!0},Ub=function(a,b){a=Q(a);b=qa(b,!0);if(a!==L||!u(X,b)||u(wa,b)){var d=Pb(a,b);!d||!u(X,b)||u(a,H)&&a[H][b]||(d.enumerable=!0);return d}},Vb=function(a){a=Qb(Q(a));for(var b=[],d=0,c;a.length>d;)u(X,c=a[d++])||c==H||c==Yc||b.push(c);return b},Wb=function(a){var b=a===L;a=Qb(b?wa:Q(a));for(var d=[],c=0,e;a.length>c;)u(X,e=a[c++])&&(b?u(L,e):1)&&d.push(X[e]);return d};la||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor!");
var a=Da(0<arguments.length?arguments[0]:void 0),b=function(d){this===L&&b.call(wa,d);u(this,H)&&u(this[H],a)&&(this[H][a]=!1);hb(this,a,Z(1,d))};V&&gb&&hb(L,a,{configurable:!0,set:b});return Sb(a)},ea(G.prototype,"toString",function(){return this._k}),La.f=Ub,O.f=Oa,Kb=Nb=Vb,Ka=$c,eb=Wb,cb.f=function(a){return Sb(E(a))});v(v.G+v.W+v.F*!la,{Symbol:G});for(var Xb="hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables".split(" "),Yb=0;Xb.length>
Yb;)E(Xb[Yb++]);for(var Zb=ka(E.store),$b=0;Zb.length>$b;)db(Zb[$b++]);v(v.S+v.F*!la,"Symbol",{"for":function(a){return u(va,a+="")?va[a]:va[a]=G(a)},keyFor:function(a){if(!ib(a))throw TypeError(a+" is not a symbol!");for(var b in va)if(va[b]===a)return b},useSetter:function(){gb=!0},useSimple:function(){gb=!1}});v(v.S+v.F*!la,"Object",{create:function(a,b){return void 0===b?fa(a):Tb(fa(a),b)},defineProperty:Oa,defineProperties:Tb,getOwnPropertyDescriptor:Ub,getOwnPropertyNames:Vb,getOwnPropertySymbols:Wb});
Ma&&v(v.S+v.F*(!la||da(function(){var a=G();return"[null]"!=Na([a])||"{}"!=Na({a:a})||"{}"!=Na(Object(a))})),"JSON",{stringify:function(a){for(var b=[a],d=1,c;arguments.length>d;)b.push(arguments[d++]);c=d=b[1];if((J(d)||void 0!==a)&&!ib(a))return Vc(d)||(d=function(a,b){"function"==typeof c&&(b=c.call(this,a,b));if(!ib(b))return b}),b[1]=d,Na.apply(Ma,b)}});G.prototype[Rb]||ea(G.prototype,Rb,G.prototype.valueOf);ta(G,"Symbol");ta(Math,"Math",!0);ta(F.JSON,"JSON",!0);db("asyncIterator");db("observable");
var ad=w.Symbol,xa=q(function(a){a.exports={"default":ad,__esModule:!0}});t(xa);var ma=q(function(a,b){b.__esModule=!0;a=ua&&ua.__esModule?ua:{default:ua};var d=xa&&xa.__esModule?xa:{default:xa},c="function"===typeof d.default&&"symbol"===typeof a.default?function(a){return typeof a}:function(a){return a&&"function"===typeof d.default&&a.constructor===d.default&&a!==d.default.prototype?"symbol":typeof a};b.default="function"===typeof d.default&&"symbol"===c(a.default)?function(a){return"undefined"===
typeof a?"undefined":c(a)}:function(a){return a&&"function"===typeof d.default&&a.constructor===d.default&&a!==d.default.prototype?"symbol":"undefined"===typeof a?"undefined":c(a)}}),pb=t(ma),bd=q(function(a,b){b.__esModule=!0;var d=ma&&ma.__esModule?ma:{default:ma};b.default=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==("undefined"===typeof b?"undefined":(0,d.default)(b))&&"function"!==typeof b?a:b}}),R=t(bd),cd=Object.setPrototypeOf||
("__proto__"in{}?function(a,b,d){try{d=Ea(Function.call,La.f(Object.prototype,"__proto__").set,2),d(a,[]),b=!(a instanceof Array)}catch(c){b=!0}return function(a,e){K(a);if(!J(e)&&null!==e)throw TypeError(e+": can't set as prototype!");b?a.__proto__=e:d(a,e);return a}}({},!1):void 0);v(v.S,"Object",{setPrototypeOf:cd});var dd=w.Object.setPrototypeOf,ac=q(function(a){a.exports={"default":dd,__esModule:!0}});t(ac);v(v.S,"Object",{create:fa});var ed=w.Object,fd=function(a,b){return ed.create(a,b)},bc=
q(function(a){a.exports={"default":fd,__esModule:!0}}),gd=t(bc),hd=q(function(a,b){function d(a){return a&&a.__esModule?a:{default:a}}b.__esModule=!0;var c=d(ac),e=d(bc),g=d(ma);b.default=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":(0,g.default)(b)));a.prototype=(0,e.default)(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(c.default?(0,c.default)(a,
b):a.__proto__=b)}}),S=t(hd);nb(ja,{EARTHRADIUS:6370996.81,MCBAND:[1.289059486E7,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1.410526172116255E-8,8.98305509648872E-6,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,1.73379812E7],[-7.435856389565537E-9,8.983055097726239E-6,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,
1.026014486E7],[-3.030883460898826E-8,8.98305509983578E-6,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552E-8,8.983055099779535E-6,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437E-9,8.983055096812155E-6,6.995724062E-5,23.10934304144901,-2.3663490511E-4,-.6321817810242,-.00663494467273,.03430082397953,
-.00466043876332,2555164.4],[2.890871144776878E-9,8.983055095805407E-6,-3.068298E-8,7.47137025468032,-3.53937994E-6,-.02145144861037,-1.234426596E-5,1.0322952773E-4,-3.23890364E-6,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[8.277824516172526E-4,111320.7020463578,6.477955746671607E8,-4.082003173641316E9,1.077490566351142E10,-1.517187553151559E10,1.205306533862167E10,
-5.124939663577472E9,9.133119359512032E8,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-2.339375119931662E7,7.968221547186455E7,-1.159649932797253E8,9.723671115602145E7,-4.366194633752821E7,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-3.441963504368392E-4,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,
9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-3.218135878613132E-4,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(a,b){if(!a||!b)return 0;a=this.convertMC2LL(a);if(!a)return 0;var d=this.toRadians(a.lng);a=this.toRadians(a.lat);b=this.convertMC2LL(b);if(!b)return 0;var c=this.toRadians(b.lng);b=this.toRadians(b.lat);return this.getDistance(d,c,a,b)},getDistanceByLL:function(a,
b){if(!a||!b)return 0;a.lng=this.getLoop(a.lng,-180,180);a.lat=this.getRange(a.lat,-74,74);b.lng=this.getLoop(b.lng,-180,180);b.lat=this.getRange(b.lat,-74,74);var d=this.toRadians(a.lng);var c=this.toRadians(a.lat);a=this.toRadians(b.lng);b=this.toRadians(b.lat);return this.getDistance(d,a,c,b)},convertMC2LL:function(a){if(null===a||void 0===a)return new U(0,0);if(180>a.lng&&-180<a.lng&&90>a.lat&&-90<a.lat)return a;var b=new U(Math.abs(a.lng),Math.abs(a.lat));for(var d=0;d<this.MCBAND.length;d++)if(b.lat>=
this.MCBAND[d]){var c=this.MC2LL[d];break}a=this.convertor(a,c);return a=new U(a.lng.toFixed(6),a.lat.toFixed(6))},convertLL2MC:function(a){if(null===a||void 0===a)return new U(0,0);if(180<a.lng||-180>a.lng||90<a.lat||-90>a.lat)return a;a.lng=this.getLoop(a.lng,-180,180);a.lat=this.getRange(a.lat,-74,74);var b=new U(a.lng,a.lat);for(var d=0;d<this.LLBAND.length;d++)if(b.lat>=this.LLBAND[d]){var c=this.LL2MC[d];break}if(!c)for(d=0;d<this.LLBAND.length;d++)if(b.lat<=-this.LLBAND[d]){c=this.LL2MC[d];
break}a=this.convertor(a,c);return a=new U(Number(a.lng.toFixed(2)),Number(a.lat.toFixed(2)))},convertor:function(a,b){if(a&&b){var d=b[0]+b[1]*Math.abs(a.lng),c=Math.abs(a.lat)/b[9];b=b[2]+b[3]*c+b[4]*c*c+b[5]*c*c*c+b[6]*c*c*c*c+b[7]*c*c*c*c*c+b[8]*c*c*c*c*c*c;d*=0>a.lng?-1:1;b*=0>a.lat?-1:1;return new U(d,b)}},getDistance:function(a,b,d,c){return this.EARTHRADIUS*Math.acos(Math.sin(d)*Math.sin(c)+Math.cos(d)*Math.cos(c)*Math.cos(b-a))},toRadians:function(a){return Math.PI*a/180},toDegrees:function(a){return 180*
a/Math.PI},getRange:function(a,b,d){null!=b&&(a=Math.max(a,b));null!=d&&(a=Math.min(a,d));return a},getLoop:function(a,b,d){for(;a>d;)a-=d-b;for(;a<b;)a+=d-b;return a}});nb(ja.prototype,{lngLatToMercator:function(a){return ja.convertLL2MC(a)},lngLatToPoint:function(a){a=ja.convertLL2MC(a);return new ob(a.lng,a.lat)},mercatorToLngLat:function(a){return ja.convertMC2LL(a)},pointToLngLat:function(a){a=new U(a.x,a.y);return ja.convertMC2LL(a)},pointToPixel:function(a,b,d,c,e){if(a)return a=this.lngLatToMercator(a,
e),b=this.getZoomUnits(b),new ob(Math.round((a.lng-d.lng)/b+c.width/2),Math.round((d.lat-a.lat)/b+c.height/2))},pixelToPoint:function(a,b,d,c,e){if(a)return b=this.getZoomUnits(b),a=new U(d.lng+b*(a.x-c.width/2),d.lat-b*(a.y-c.height/2)),this.mercatorToLngLat(a,e)},getZoomUnits:function(a){return Math.pow(2,18-a)}});Ga("keys",function(){return function(a){return ka(Object(ca(a)))}});var id=w.Object.keys,jd=q(function(a){a.exports={"default":id,__esModule:!0}}),Y=t(jd),kd=E("iterator"),ld=Array.prototype,
md=E("toStringTag"),nd="Arguments"==sa(function(){return arguments}()),cc=function(a){var b;if(void 0===a)var d="Undefined";else{if(null===a)var c="Null";else{a:{var e=a=Object(a);try{c=e[md];break a}catch(g){}c=void 0}c="string"==typeof(d=c)?d:nd?sa(a):"Object"==(b=sa(a))&&"function"==typeof a.callee?"Arguments":b}d=c}return d},od=E("iterator"),dc=w.getIteratorMethod=function(a){if(void 0!=a)return a[od]||a["@@iterator"]||W[cc(a)]},jb=E("iterator"),ec=!1;try{[7][jb]()["return"]=function(){ec=!0}}catch(a){}v(v.S+
v.F*!function(a,b){if(!b&&!ec)return!1;var d=!1;try{b=[7];var c=b[jb]();c.next=function(){return{done:d=!0}};b[jb]=function(){return c};a(b)}catch(e){}return d}(function(a){}),"Array",{from:function(a){var b=Object(ca(a)),d="function"==typeof this?this:Array,c=arguments.length,e=1<c?arguments[1]:void 0,g=void 0!==e,f=0,h=dc(b),k;g&&(e=Ea(e,2<c?arguments[2]:void 0,2));if(void 0!=h&&(d!=Array||void 0===h||W.Array!==h&&ld[kd]!==h))for(b=h.call(b),d=new d;!(k=b.next()).done;f++){var l=d;c=f;if(g){h=b;
var p=e;k=[k.value,f];try{var m=p(K(k)[0],k[1])}catch(n){throw e=h["return"],void 0!==e&&K(e.call(h)),n;}}else m=k.value;h=l;l=m;c in h?O.f(h,c,Z(0,l)):h[c]=l}else for(m=zb(b.length),d=new d(m);m>f;f++)c=d,h=f,l=g?e(b[f],f):b[f],h in c?O.f(c,h,Z(0,l)):c[h]=l;d.length=f;return d}});var pd=w.Array.from,ya=q(function(a){a.exports={"default":pd,__esModule:!0}});t(ya);var qd=q(function(a,b){b.__esModule=!0;var d=ya&&ya.__esModule?ya:{default:ya};b.default=function(a){if(Array.isArray(a)){for(var b=0,c=
Array(a.length);b<a.length;b++)c[b]=a[b];return c}return(0,d.default)(a)}}),fc=t(qd),Pa=Object.assign,rd=!Pa||da(function(){var a={},b={},d=Symbol();a[d]=7;"abcdefghijklmnopqrst".split("").forEach(function(a){b[a]=a});return 7!=Pa({},a)[d]||"abcdefghijklmnopqrst"!=Object.keys(Pa({},b)).join("")})?function(a,b){for(var d=Object(ca(a)),c=arguments.length,e=1,g=eb,f=Ka;c>e;)for(var h=yb(arguments[e++]),k=g?ka(h).concat(g(h)):ka(h),l=k.length,p=0,m;l>p;)f.call(h,m=k[p++])&&(d[m]=h[m]);return d}:Pa;v(v.S+
v.F,"Object",{assign:rd});var sd=w.Object.assign,td=q(function(a){a.exports={"default":sd,__esModule:!0}}),aa=t(td),gc=function(){function a(b){z(this,a);this.options=this.getCommonDefaultOptions();this.options=aa(this.options,this.getDefaultOptions());this.autoUpdate=!1;this.options=aa(this.options,b);this.options.data&&(this.data=this.options.data)}B(a,[{key:"getCommonDefaultOptions",value:function(){return{}}},{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(a){}},
{key:"destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"render",value:function(){}},{key:"setData",value:function(a,d){d=d||{};this.data=a;this.onDataChanged&&this.onDataChanged(this.getData());this.onChanged&&this.onChanged(this.getOptions(),this.getData());!1!==d.autoRender&&this.webglLayer&&this.webglLayer.render()}},{key:"getData",value:function(){return this.data||[]}},{key:"setOptions",value:function(a){a=a||{};var b=aa({},this.getOptions());aa(this.options,a);this.onOptionsChanged&&
this.onOptionsChanged(this.getOptions(),b);this.onChanged&&this.onChanged(this.getOptions(),this.getData());a.data?this.setData(a.data):this.webglLayer&&this.webglLayer.render()}},{key:"getOptions",value:function(){return this.options||{}}},{key:"onOptionsChanged",value:function(a,d){}},{key:"onDataChanged",value:function(a){}},{key:"onChanged",value:function(a,d){}},{key:"onDestroy",value:function(){}},{key:"lnglatToMercator",value:function(a,d){}},{key:"setWebglLayer",value:function(a){this.webglLayer=
a}},{key:"getWebglLayer",value:function(){return this.webglLayer}},{key:"isRequestAnimation",value:function(){return this.autoUpdate}}]);return a}(),ud=E("iterator"),vd=w.isIterable=function(a){a=Object(a);return void 0!==a[ud]||"@@iterator"in a||W.hasOwnProperty(cc(a))},za=q(function(a){a.exports={"default":vd,__esModule:!0}});t(za);var wd=w.getIterator=function(a){var b=dc(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return K(b.call(a))},Aa=q(function(a){a.exports={"default":wd,
__esModule:!0}});t(Aa);var xd=q(function(a,b){b.__esModule=!0;var d=za&&za.__esModule?za:{default:za},c=Aa&&Aa.__esModule?Aa:{default:Aa};b.default=function(){return function(a,b){if(Array.isArray(a))return a;if((0,d.default)(Object(a))){var e=[],g=!0,k=!1,l=void 0;try{for(var p=(0,c.default)(a),m;!(g=(m=p.next()).done)&&(e.push(m.value),!b||e.length!==b);g=!0);}catch(n){k=!0,l=n}finally{try{if(!g&&p["return"])p["return"]()}finally{if(k)throw l;}}return e}throw new TypeError("Invalid attempt to destructure non-iterable instance");
}}()}),hc=t(xd),yd=Jb.onFreeze;Ga("freeze",function(a){return function(b){return a&&J(b)?a(yd(b)):b}});var zd=w.Object.freeze,Ad=q(function(a){a.exports={"default":zd,__esModule:!0}}),rb=t(Ad),ic=w.JSON||(w.JSON={stringify:JSON.stringify}),Bd=function(a){return ic.stringify.apply(ic,arguments)},Cd=q(function(a){a.exports={"default":Bd,__esModule:!0}}),qc=t(Cd),M={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,
228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,
107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],
gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],
lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,
250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],
pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,
128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Dd=La.f;Ga("getOwnPropertyDescriptor",function(){return function(a,b){return Dd(Q(a),b)}});var Ed=w.Object,Fd=function(a,b){return Ed.getOwnPropertyDescriptor(a,b)},Gd=q(function(a){a.exports={"default":Fd,__esModule:!0}}),Hd=t(Gd),Ba=q(function(a){var b=Array.prototype.concat,d=Array.prototype.slice,
c=a.exports=function(a){for(var c=[],e=0,h=a.length;e<h;e++){var k=a[e];var l=(l=k)&&"string"!==typeof l?l instanceof Array||Array.isArray(l)||0<=l.length&&(l.splice instanceof Function||Hd(l,l.length-1)&&"String"!==l.constructor.name):!1;l?c=b.call(c,d.call(k)):c.push(k)}return c};c.wrap=function(a){return function(){return a(c(arguments))}}}),oa=q(function(a){function b(a,b,c){return Math.min(Math.max(b,a),c)}function d(a){a=a.toString(16).toUpperCase();return 2>a.length?"0"+a:a}var c={},e;for(e in M)M.hasOwnProperty(e)&&
(c[M[e]]=e);var g=a.exports={to:{},get:{}};g.get=function(a){switch(a.substring(0,3).toLowerCase()){case "hsl":a=g.get.hsl(a);var b="hsl";break;case "hwb":a=g.get.hwb(a);b="hwb";break;default:a=g.get.rgb(a),b="rgb"}return a?{model:b,value:a}:null};g.get.rgb=function(a){if(!a)return null;var c=/^#([a-f0-9]{3,4})$/i,e=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,d=/^rgba?\(\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,
g=/(\D+)/,f=[0,0,0,1],n;if(n=a.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){c=n[2];n=n[1];for(a=0;3>a;a++)e=2*a,f[a]=parseInt(n.slice(e,e+2),16);c&&(f[3]=Math.round(parseInt(c,16)/255*100)/100)}else if(n=a.match(c)){n=n[1];c=n[3];for(a=0;3>a;a++)f[a]=parseInt(n[a]+n[a],16);c&&(f[3]=Math.round(parseInt(c+c,16)/255*100)/100)}else if(n=a.match(e)){for(a=0;3>a;a++)f[a]=parseInt(n[a+1],0);n[4]&&(f[3]=parseFloat(n[4]))}else if(n=a.match(d)){for(a=0;3>a;a++)f[a]=Math.round(2.55*parseFloat(n[a+1]));n[4]&&(f[3]=
parseFloat(n[4]))}else{if(n=a.match(g)){if("transparent"===n[1])return[0,0,0,0];f=M[n[1]];if(!f)return null;f[3]=1;return f}return null}for(a=0;3>a;a++)f[a]=b(f[a],0,255);f[3]=b(f[3],0,1);return f};g.get.hsl=function(a){if(!a)return null;var c=a.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(c){var e=parseFloat(c[4]);a=(parseFloat(c[1])+360)%360;var d=b(parseFloat(c[2]),0,100);c=b(parseFloat(c[3]),0,100);e=b(isNaN(e)?
1:e,0,1);return[a,d,c,e]}return null};g.get.hwb=function(a){if(!a)return null;var c=a.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(c){var e=parseFloat(c[4]);a=(parseFloat(c[1])%360+360)%360;var d=b(parseFloat(c[2]),0,100);c=b(parseFloat(c[3]),0,100);e=b(isNaN(e)?1:e,0,1);return[a,d,c,e]}return null};g.to.hex=function(){var a=Ba(arguments);return"#"+d(a[0])+d(a[1])+d(a[2])+(1>a[3]?d(Math.round(255*a[3])):"")};g.to.rgb=function(){var a=
Ba(arguments);return 4>a.length||1===a[3]?"rgb("+Math.round(a[0])+", "+Math.round(a[1])+", "+Math.round(a[2])+")":"rgba("+Math.round(a[0])+", "+Math.round(a[1])+", "+Math.round(a[2])+", "+a[3]+")"};g.to.rgb.percent=function(){var a=Ba(arguments),b=Math.round(a[0]/255*100),c=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return 4>a.length||1===a[3]?"rgb("+b+"%, "+c+"%, "+e+"%)":"rgba("+b+"%, "+c+"%, "+e+"%, "+a[3]+")"};g.to.hsl=function(){var a=Ba(arguments);return 4>a.length||1===a[3]?"hsl("+
a[0]+", "+a[1]+"%, "+a[2]+"%)":"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+a[3]+")"};g.to.hwb=function(){var a=Ba(arguments),b="";4<=a.length&&1!==a[3]&&(b=", "+a[3]);return"hwb("+a[0]+", "+a[1]+"%, "+a[2]+"%"+b+")"};g.to.keyword=function(a){return c[a.slice(0,3)]}}),ia=q(function(a){var b={};for(e in M)M.hasOwnProperty(e)&&(b[M[e]]=e);var d=a.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},
xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},c;for(c in d)if(d.hasOwnProperty(c)){if(!("channels"in d[c]))throw Error("missing channels property: "+c);if(!("labels"in d[c]))throw Error("missing channel labels property: "+
c);if(d[c].labels.length!==d[c].channels)throw Error("channel and label counts mismatch: "+c);a=d[c].channels;var e=d[c].labels;delete d[c].channels;delete d[c].labels;Object.defineProperty(d[c],"channels",{value:a});Object.defineProperty(d[c],"labels",{value:e})}d.rgb.hsl=function(a){var b=a[0]/255,c=a[1]/255,e=a[2]/255;a=Math.min(b,c,e);var d=Math.max(b,c,e),g=d-a,m;d===a?m=0:b===d?m=(c-e)/g:c===d?m=2+(e-b)/g:e===d&&(m=4+(b-c)/g);m=Math.min(60*m,360);0>m&&(m+=360);b=(a+d)/2;return[m,100*(d===a?
0:.5>=b?g/(d+a):g/(2-d-a)),100*b]};d.rgb.hsv=function(a){var b,c=a[0]/255,e=a[1]/255,d=a[2]/255,g=Math.max(c,e,d);var m=g-Math.min(c,e,d);if(0===m)var n=b=0;else{b=m/g;a=(g-c)/6/m+.5;var r=(g-e)/6/m+.5;m=(g-d)/6/m+.5;c===g?n=m-r:e===g?n=1/3+a-m:d===g&&(n=2/3+r-a);0>n?n+=1:1<n&&--n}return[360*n,100*b,100*g]};d.rgb.hwb=function(a){var b=a[0],c=a[1],e=a[2];a=d.rgb.hsl(a)[0];var g=1/255*Math.min(b,Math.min(c,e));e=1-1/255*Math.max(b,Math.max(c,e));return[a,100*g,100*e]};d.rgb.cmyk=function(a){var b=a[0]/
255,c=a[1]/255;a=a[2]/255;var e=Math.min(1-b,1-c,1-a);return[100*((1-b-e)/(1-e)||0),100*((1-c-e)/(1-e)||0),100*((1-a-e)/(1-e)||0),100*e]};d.rgb.keyword=function(a){var c=b[a];if(c)return c;c=Infinity;var e;for(e in M)if(M.hasOwnProperty(e)){var d=M[e];d=Math.pow(a[0]-d[0],2)+Math.pow(a[1]-d[1],2)+Math.pow(a[2]-d[2],2);if(d<c){c=d;var g=e}}return g};d.keyword.rgb=function(a){return M[a]};d.rgb.xyz=function(a){var b=a[0]/255,c=a[1]/255;a=a[2]/255;b=.04045<b?Math.pow((b+.055)/1.055,2.4):b/12.92;c=.04045<
c?Math.pow((c+.055)/1.055,2.4):c/12.92;a=.04045<a?Math.pow((a+.055)/1.055,2.4):a/12.92;return[100*(.4124*b+.3576*c+.1805*a),100*(.2126*b+.7152*c+.0722*a),100*(.0193*b+.1192*c+.9505*a)]};d.rgb.lab=function(a){var b=d.rgb.xyz(a);a=b[0];var c=b[1];b=b[2];a/=95.047;c/=100;b/=108.883;a=.008856<a?Math.pow(a,1/3):7.787*a+16/116;c=.008856<c?Math.pow(c,1/3):7.787*c+16/116;b=.008856<b?Math.pow(b,1/3):7.787*b+16/116;return[116*c-16,500*(a-c),200*(c-b)]};d.hsl.rgb=function(a){var b=a[0]/360,c=a[1]/100;a=a[2]/
100;if(0===c){var e=255*a;return[e,e,e]}c=.5>a?a*(1+c):a+c-a*c;a=2*a-c;var d=[0,0,0];for(var g=0;3>g;g++)e=b+1/3*-(g-1),0>e&&e++,1<e&&e--,e=1>6*e?a+6*(c-a)*e:1>2*e?c:2>3*e?a+(c-a)*(2/3-e)*6:a,d[g]=255*e;return d};d.hsl.hsv=function(a){var b=a[0],c=a[1]/100;a=a[2]/100;var e=c,d=Math.max(a,.01);a*=2;c*=1>=a?a:2-a;e*=1>=d?d:2-d;return[b,100*(0===a?2*e/(d+e):2*c/(a+c)),(a+c)/2*100]};d.hsv.rgb=function(a){var b=a[0]/60,c=a[1]/100;a=a[2]/100;var e=Math.floor(b)%6,d=b-Math.floor(b);b=255*a*(1-c);var g=255*
a*(1-c*d);c=255*a*(1-c*(1-d));a*=255;switch(e){case 0:return[a,c,b];case 1:return[g,a,b];case 2:return[b,a,c];case 3:return[b,g,a];case 4:return[c,b,a];case 5:return[a,b,g]}};d.hsv.hsl=function(a){var b=a[0],c=a[1]/100;a=a[2]/100;var e=Math.max(a,.01);var d=(2-c)*e;e=c*e/(1>=d?d:2-d)||0;return[b,100*e,(2-c)*a/2*100]};d.hwb.rgb=function(a){var b=a[0]/360,c=a[1]/100;a=a[2]/100;var e=c+a;1<e&&(c/=e,a/=e);e=Math.floor(6*b);a=1-a;b=6*b-e;0!==(e&1)&&(b=1-b);b=c+b*(a-c);switch(e){default:case 6:case 0:e=
a;var d=b;break;case 1:e=b;d=a;break;case 2:e=c;d=a;c=b;break;case 3:e=c;d=b;c=a;break;case 4:e=b;d=c;c=a;break;case 5:e=a,d=c,c=b}return[255*e,255*d,255*c]};d.cmyk.rgb=function(a){var b=a[3]/100;return[255*(1-Math.min(1,a[0]/100*(1-b)+b)),255*(1-Math.min(1,a[1]/100*(1-b)+b)),255*(1-Math.min(1,a[2]/100*(1-b)+b))]};d.xyz.rgb=function(a){var b=a[0]/100,c=a[1]/100,e=a[2]/100;a=3.2406*b+-1.5372*c+-.4986*e;var d=-.9689*b+1.8758*c+.0415*e;b=.0557*b+-.204*c+1.057*e;a=.0031308<a?1.055*Math.pow(a,1/2.4)-.055:
12.92*a;d=.0031308<d?1.055*Math.pow(d,1/2.4)-.055:12.92*d;b=.0031308<b?1.055*Math.pow(b,1/2.4)-.055:12.92*b;a=Math.min(Math.max(0,a),1);d=Math.min(Math.max(0,d),1);b=Math.min(Math.max(0,b),1);return[255*a,255*d,255*b]};d.xyz.lab=function(a){var b=a[0],c=a[1];a=a[2];b/=95.047;c/=100;a/=108.883;b=.008856<b?Math.pow(b,1/3):7.787*b+16/116;c=.008856<c?Math.pow(c,1/3):7.787*c+16/116;a=.008856<a?Math.pow(a,1/3):7.787*a+16/116;return[116*c-16,500*(b-c),200*(c-a)]};d.lab.xyz=function(a){var b=a[1],c=a[2];
a=(a[0]+16)/116;b=b/500+a;c=a-c/200;var e=Math.pow(a,3),d=Math.pow(b,3),g=Math.pow(c,3);return[95.047*(.008856<d?d:(b-16/116)/7.787),100*(.008856<e?e:(a-16/116)/7.787),108.883*(.008856<g?g:(c-16/116)/7.787)]};d.lab.lch=function(a){var b=a[0],c=a[1];a=a[2];var e=360*Math.atan2(a,c)/2/Math.PI;0>e&&(e+=360);return[b,Math.sqrt(c*c+a*a),e]};d.lch.lab=function(a){var b=a[0],c=a[1];a=a[2]/360*2*Math.PI;return[b,c*Math.cos(a),c*Math.sin(a)]};d.rgb.ansi16=function(a){var b=a[0],c=a[1],e=a[2],g=1 in arguments?
arguments[1]:d.rgb.hsv(a)[2];g=Math.round(g/50);if(0===g)return 30;b=30+(Math.round(e/255)<<2|Math.round(c/255)<<1|Math.round(b/255));2===g&&(b+=60);return b};d.hsv.ansi16=function(a){return d.rgb.ansi16(d.hsv.rgb(a),a[2])};d.rgb.ansi256=function(a){var b=a[0],c=a[1];a=a[2];return b===c&&c===a?8>b?16:248<b?231:Math.round((b-8)/247*24)+232:16+36*Math.round(b/255*5)+6*Math.round(c/255*5)+Math.round(a/255*5)};d.ansi16.rgb=function(a){var b=a%10;if(0===b||7===b)return 50<a&&(b+=3.5),b=b/10.5*255,[b,b,
b];a=.5*(~~(50<a)+1);return[(b&1)*a*255,(b>>1&1)*a*255,(b>>2&1)*a*255]};d.ansi256.rgb=function(a){if(232<=a){var b=10*(a-232)+8;return[b,b,b]}a-=16;b=Math.floor(a/36)/5*255;var c=Math.floor((a%=36)/6)/5*255;return[b,c,a%6/5*255]};d.rgb.hex=function(a){a=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(a.length)+a};d.hex.rgb=function(a){a=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!a)return[0,0,0];var b=a[0];
3===a[0].length&&(b=b.split("").map(function(a){return a+a}).join(""));a=parseInt(b,16);return[a>>16&255,a>>8&255,a&255]};d.rgb.hcg=function(a){var b=a[0]/255,c=a[1]/255;a=a[2]/255;var e=Math.max(Math.max(b,c),a),d=Math.min(Math.min(b,c),a),g=e-d;return[(0>=g?0:e===b?(c-a)/g%6:e===c?2+(a-b)/g:(b-c)/g+8)/6%1*360,100*g,100*(1>g?d/(1-g):0)]};d.hsl.hcg=function(a){var b=a[1]/100,c=a[2]/100,e=0;b=.5>c?2*b*c:2*b*(1-c);1>b&&(e=(c-.5*b)/(1-b));return[a[0],100*b,100*e]};d.hsv.hcg=function(a){var b=a[2]/100,
c=a[1]/100*b,e=0;1>c&&(e=(b-c)/(1-c));return[a[0],100*c,100*e]};d.hcg.rgb=function(a){var b=a[1]/100,c=a[2]/100;if(0===b)return[255*c,255*c,255*c];var e=[0,0,0];a=a[0]/360%1*6;var d=a%1,g=1-d;switch(Math.floor(a)){case 0:e[0]=1;e[1]=d;e[2]=0;break;case 1:e[0]=g;e[1]=1;e[2]=0;break;case 2:e[0]=0;e[1]=1;e[2]=d;break;case 3:e[0]=0;e[1]=g;e[2]=1;break;case 4:e[0]=d;e[1]=0;e[2]=1;break;default:e[0]=1,e[1]=0,e[2]=g}c*=1-b;return[255*(b*e[0]+c),255*(b*e[1]+c),255*(b*e[2]+c)]};d.hcg.hsv=function(a){var b=
a[1]/100,c=b+a[2]/100*(1-b),e=0;0<c&&(e=b/c);return[a[0],100*e,100*c]};d.hcg.hsl=function(a){var b=a[1]/100,c=a[2]/100*(1-b)+.5*b,e=0;0<c&&.5>c?e=b/(2*c):.5<=c&&1>c&&(e=b/(2*(1-c)));return[a[0],100*e,100*c]};d.hcg.hwb=function(a){var b=a[1]/100,c=b+a[2]/100*(1-b);return[a[0],100*(c-b),100*(1-c)]};d.hwb.hcg=function(a){var b=1-a[2]/100,c=b-a[1]/100,e=0;1>c&&(e=(b-c)/(1-c));return[a[0],100*c,100*e]};d.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]};d.rgb.apple=function(a){return[a[0]/
255*65535,a[1]/255*65535,a[2]/255*65535]};d.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]};d.gray.hsl=d.gray.hsv=function(a){return[0,0,a[0]]};d.gray.hwb=function(a){return[0,100,a[0]]};d.gray.cmyk=function(a){return[0,0,0,a[0]]};d.gray.lab=function(a){return[a[0],0,0]};d.gray.hex=function(a){a=Math.round(a[0]/100*255)&255;a=((a<<16)+(a<<8)+a).toString(16).toUpperCase();return"000000".substring(a.length)+a};d.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]}}),Id=function(a){for(var b=
{},d=Y(ia),c=d.length,e=0;e<c;e++)b[d[e]]={distance:-1,parent:null};d=[a];for(b[a].distance=0;d.length;){a=d.pop();c=Y(ia[a]);e=c.length;for(var g=0;g<e;g++){var f=c[g],h=b[f];-1===h.distance&&(h.distance=b[a].distance+1,h.parent=a,d.unshift(f))}}d={};a=Y(b);c=a.length;for(e=0;e<c;e++){var k=a[e];if(null!==b[k].parent){g=k;f=b;h=[f[k].parent,k];var l=ia[f[k].parent][k];for(k=f[k].parent;f[k].parent;)h.unshift(f[k].parent),l=nc(ia[f[k].parent][k],l),k=f[k].parent;l.conversion=h;d[g]=l}}return d},na=
{};Y(ia).forEach(function(a){na[a]={};Object.defineProperty(na[a],"channels",{value:ia[a].channels});Object.defineProperty(na[a],"labels",{value:ia[a].labels});var b=Id(a);Y(b).forEach(function(d){var c=b[d];na[a][d]=pc(c);na[a][d].raw=oc(c)})});var I=na,Sa=[].slice,qb=["keyword","gray","hex"],Ua={};Y(I).forEach(function(a){Ua[Sa.call(I[a].labels).sort().join("")]=a});var Ca={};A.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(a){var b=
this.model in oa.to?this:this.rgb();b=b.round("number"===typeof a?a:1);a=1===b.valpha?b.color:b.color.concat(this.valpha);return oa.to[b.model](a)},percentString:function(a){a=this.rgb().round("number"===typeof a?a:1);a=1===a.valpha?a.color:a.color.concat(this.valpha);return oa.to.rgb.percent(a)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var a={},b=I[this.model].channels,d=I[this.model].labels,c=0;c<b;c++)a[d[c]]=this.color[c];
1!==this.valpha&&(a.alpha=this.valpha);return a},unitArray:function(){var a=this.rgb().color;a[0]/=255;a[1]/=255;a[2]/=255;1!==this.valpha&&a.push(this.valpha);return a},unitObject:function(){var a=this.rgb().object();a.r/=255;a.g/=255;a.b/=255;1!==this.valpha&&(a.alpha=this.valpha);return a},round:function(a){a=Math.max(a||0,0);return new A(this.color.map(rc(a)).concat(this.valpha),this.model)},alpha:function(a){return arguments.length?new A(this.color.concat(Math.max(0,Math.min(1,a))),this.model):
this.valpha},red:x("rgb",0,y(255)),green:x("rgb",1,y(255)),blue:x("rgb",2,y(255)),hue:x(["hsl","hsv","hsl","hwb","hcg"],0,function(a){return(a%360+360)%360}),saturationl:x("hsl",1,y(100)),lightness:x("hsl",2,y(100)),saturationv:x("hsv",1,y(100)),value:x("hsv",2,y(100)),chroma:x("hcg",1,y(100)),gray:x("hcg",2,y(100)),white:x("hwb",1,y(100)),wblack:x("hwb",2,y(100)),cyan:x("cmyk",0,y(100)),magenta:x("cmyk",1,y(100)),yellow:x("cmyk",2,y(100)),black:x("cmyk",3,y(100)),x:x("xyz",0,y(100)),y:x("xyz",1,
y(100)),z:x("xyz",2,y(100)),l:x("lab",0,y(100)),a:x("lab",1),b:x("lab",2),keyword:function(a){return arguments.length?new A(a):I[this.model].keyword(this.color)},hex:function(a){return arguments.length?new A(a):oa.to.hex(this.rgb().round().color)},rgbNumber:function(){var a=this.rgb().color;return(a[0]&255)<<16|(a[1]&255)<<8|a[2]&255},luminosity:function(){for(var a=this.rgb().color,b=[],d=0;d<a.length;d++){var c=a[d]/255;b[d]=.03928>=c?c/12.92:Math.pow((c+.055)/1.055,2.4)}return.2126*b[0]+.7152*
b[1]+.0722*b[2]},contrast:function(a){var b=this.luminosity();a=a.luminosity();return b>a?(b+.05)/(a+.05):(a+.05)/(b+.05)},level:function(a){a=this.contrast(a);return 7.1<=a?"AAA":4.5<=a?"AA":""},isDark:function(){var a=this.rgb().color;return 128>(299*a[0]+587*a[1]+114*a[2])/1E3},isLight:function(){return!this.isDark()},negate:function(){for(var a=this.rgb(),b=0;3>b;b++)a.color[b]=255-a.color[b];return a},lighten:function(a){var b=this.hsl();b.color[2]+=b.color[2]*a;return b},darken:function(a){var b=
this.hsl();b.color[2]-=b.color[2]*a;return b},saturate:function(a){var b=this.hsl();b.color[1]+=b.color[1]*a;return b},desaturate:function(a){var b=this.hsl();b.color[1]-=b.color[1]*a;return b},whiten:function(a){var b=this.hwb();b.color[1]+=b.color[1]*a;return b},blacken:function(a){var b=this.hwb();b.color[2]+=b.color[2]*a;return b},grayscale:function(){var a=this.rgb().color;a=.3*a[0]+.59*a[1]+.11*a[2];return A.rgb(a,a,a)},fade:function(a){return this.alpha(this.valpha-this.valpha*a)},opaquer:function(a){return this.alpha(this.valpha+
this.valpha*a)},rotate:function(a){var b=this.hsl(),d=b.color[0];d=(d+a)%360;b.color[0]=0>d?360+d:d;return b},mix:function(a,b){if(!a||!a.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+("undefined"===typeof a?"undefined":pb(a)));a=a.rgb();var d=this.rgb();b=void 0===b?.5:b;var c=2*b-1,e=a.alpha()-d.alpha();c=((-1===c*e?c:(c+e)/(1+c*e))+1)/2;e=1-c;return A.rgb(c*a.red()+e*d.red(),c*a.green()+e*d.green(),c*a.blue()+e*d.blue(),a.alpha()*b+d.alpha()*(1-b))}};
Y(I).forEach(function(a){if(-1===qb.indexOf(a)){var b=I[a].channels;A.prototype[a]=function(){if(this.model===a)return new A(this);if(arguments.length)return new A(arguments,a);var d="number"===typeof arguments[b]?b:this.valpha;var c=I[this.model][a].raw(this.color);c=Array.isArray(c)?c:[c];return new A(c.concat(d),a)};A[a]=function(d){"number"===typeof d&&(d=Ta(Sa.call(arguments),b));return new A(d,a)}}});var ba=function(){function a(b,d,c){z(this,a);this.options=d;this.gl=b;c&&(this.map=c.map);
c=this.getVertexShader(d.vertexShader);var e=this.getFragmentShader(d.fragmentShader);d=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,c);b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)?(c=b.createShader(b.FRAGMENT_SHADER),b.shaderSource(c,e),b.compileShader(c),b.getShaderParameter(c,b.COMPILE_STATUS)?(e=b.createProgram(),b.attachShader(e,d),b.attachShader(e,c),b.deleteShader(d),b.deleteShader(c),b.linkProgram(e),b.getProgramParameter(e,b.LINK_STATUS)?d=e:(d="Shader program failed to link.  The error log is:"+
b.getProgramInfoLog(e),console.error(d),d=-1)):(d="Fragment shader failed to compile.  The error log is:"+b.getShaderInfoLog(c),console.error(d),d=-1)):(d="Vertex shader failed to compile.  The error log is:"+b.getShaderInfoLog(d),console.error(d),d=-1);d=this.program=d;c={};e=b.getProgramParameter(d,b.ACTIVE_ATTRIBUTES);for(var g=0;g<e;g++){var f=b.getActiveAttrib(d,g);c[f.name]=b.getAttribLocation(d,f.name)}g={};f={};for(var h=b.getProgramParameter(d,b.ACTIVE_UNIFORMS),k=0;k<h;k++){var l=b.getActiveUniform(d,
k);g[l.name]=b.getUniformLocation(d,l.name);f[l.name]=l.type}this.parameter=b={attributes:c,numAttributes:e,uniformsType:f,uniforms:g};this.attributes=b.attributes;this.uniforms=b.uniforms;this.parameter=b}B(a,[{key:"getVertexShader",value:function(a){var b="";this.map&&"cesium"===this.map.type&&(b="#define LOG_DEPTH\n");b+="#ifdef LOG_DEPTH\nvarying float v_depthFromNearPlusOne;\n#endif\nuniform vec2 MAPV_resolution;\n#if defined(PICK)\nuniform bool uIsPickRender;attribute vec3 aPickColor;uniform vec3 uPickedColor;varying vec4 vPickColor;uniform bool uEnablePicked;bool mapvIsPicked(){return uEnablePicked&&aPickColor==uPickedColor;}\n#endif\nvoid afterMain(){\n#if defined(LOG_DEPTH)\nv_depthFromNearPlusOne=(gl_Position.w-0.1)+1.0;gl_Position.z=clamp(gl_Position.z/gl_Position.w,-1.0,1.0)*gl_Position.w;\n#endif\n#if defined(PICK)\nvPickColor=vec4(aPickColor,0.0);if(mapvIsPicked()){vPickColor.a=1.0;}\n#endif\n}";
a=this.getDefines()+b+a;a=a.replace("void main","void originMain");return a+"void main() {originMain(); afterMain();}"}},{key:"getFragmentShader",value:function(a){var b="";this.map&&"cesium"===this.map.type&&(b="#define LOG_DEPTH\n");b+="#if defined(LOG_DEPTH)\n#extension GL_EXT_frag_depth : enable\n#endif\nprecision highp float;uniform vec2 MAPV_resolution;\n#if defined(PICK)\nuniform bool uIsPickRender;varying vec4 vPickColor;bool mapvIsPicked(){return vPickColor.a==1.0;}\n#endif\n#if defined(LOG_DEPTH)\nuniform float oneOverLog2FarDepthFromNearPlusOne;uniform float farDepthFromNearPlusOne;varying float v_depthFromNearPlusOne;void writeLogDepth(float depth){if(depth<=0.9999999||depth>farDepthFromNearPlusOne){discard;}gl_FragDepthEXT=log2(depth)*oneOverLog2FarDepthFromNearPlusOne;}\n#endif\nvoid afterMain(){\n#if defined(PICK)\nif(uIsPickRender){gl_FragColor=vec4(vPickColor.rgb,1.0);return;}\n#endif\n#if defined(LOG_DEPTH)\nwriteLogDepth(v_depthFromNearPlusOne);\n#endif\n}";
a=this.getDefines()+b+a;a=a.replace("void main","void originMain");return a+"void main() {originMain(); afterMain();}"}},{key:"getDefines",value:function(){var a="",d=this.options.defines;if(d)for(var c=0;c<d.length;c++)a+="#define "+d[c]+"\n";return a}},{key:"use",value:function(a,d){this.gl=a;a.useProgram(this.program);this.map&&"cesium"===this.map.type&&this.setUniforms({oneOverLog2FarDepthFromNearPlusOne:this.map.map.scene.context._us._oneOverLog2FarDepthFromNearPlusOne,farDepthFromNearPlusOne:this.map.map.scene.context._us._farDepthFromNearPlusOne});
this.uniforms.MAPV_resolution&&this.setUniforms({MAPV_resolution:[a.canvas.width,a.canvas.height]})}},{key:"setUniform",value:function(a,d){var b=this.gl,e=this.uniforms[a];if(e)switch(this.parameter.uniformsType[a]){case b.FLOAT:b.uniform1f(e,d);break;case b.FLOAT_VEC2:b.uniform2f(e,d[0],d[1]);break;case b.FLOAT_VEC3:b.uniform3f(e,d[0],d[1],d[2]);break;case b.FLOAT_VEC4:b.uniform4f(e,d[0],d[1],d[2],d[3]);break;case b.SAMPLER_2D:case b.SAMPLER_CUBE:b.activeTexture(b["TEXTURE"+this.textureIndex]);
b.uniform1i(e,this.textureIndex);b.bindTexture(b.TEXTURE_2D,d);this.textureIndex++;break;case b.INT:case b.BOOL:b.uniform1i(e,d);break;case b.INT_VEC2:case b.BOOL_VEC2:b.uniform2i(e,d[0],d[1]);break;case b.INT_VEC3:case b.BOOL_VEC3:b.uniform3i(e,d[0],d[1],d[2]);break;case b.INT_VEC4:case b.BOOL_VEC4:b.uniform4i(e,d[0],d[1],d[2],d[3]);break;case b.FLOAT_MAT2:b.uniformMatrix2fv(e,!1,d);break;case b.FLOAT_MAT3:b.uniformMatrix3fv(e,!1,d);break;case b.FLOAT_MAT4:b.uniformMatrix4fv(e,!1,d);break;default:console.error("Unrecognized uniform type: "+
a)}else console.warn("Unrecognized uniform type: "+a)}},{key:"setUniforms",value:function(a){this.textureIndex=0;for(var b in a)this.setUniform(b,a[b])}}]);return a}();(function(){function a(b){z(this,a);this.options=b;this.gl=b.gl;this.savedState=[];this.currentState=this.getCurrentState()}B(a,[{key:"setDefaultState",value:function(){this.setState()}},{key:"getDefaultState",value:function(){return{blend:!1,depthTest:!1,cullFace:!1,depthMask:!0,stencilTest:!1}}},{key:"getCurrentState",value:function(){var a=
this.gl;return{blend:a.getParameter(a.BLEND),stencilTest:a.getParameter(a.STENCIL_TEST),depthTest:a.getParameter(a.DEPTH_TEST),cullFace:a.getParameter(a.CULL_FACE),depthMask:a.getParameter(a.DEPTH_WRITEMASK)}}},{key:"save",value:function(){this.savedState.push(this.getCurrentState())}},{key:"restore",value:function(){var a=this.savedState.pop();this.setState(a)}},{key:"setState",value:function(a){var b=this.gl,c=this.getCurrentState();a=aa(this.getDefaultState(),a);a.blend!==c.blend&&(a.blend?b.enable(b.BLEND):
b.disable(b.BLEND));a.depthTest!==c.depthTest&&(a.depthTest?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST));a.cullFace!==c.cullFace&&(a.cullFace?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE));a.depthMask!==c.depthMask&&(a.depthMask?b.depthMask(!0):b.depthMask(!1));this.currentState=a}}]);return a})();var kb=function(){function a(b){z(this,a);this.options=b;this.gl=b.gl;this.buffer=this.gl.createBuffer();b.data&&this.updateData(b.data)}B(a,[{key:"updateData",value:function(a){var b=this.options,c=this.gl;
this.bind();c.bufferData(c[b.target],a,c[b.usage])}},{key:"bind",value:function(a){a=a||this.gl;a.bindBuffer(a[this.options.target],this.buffer)}},{key:"unBind",value:function(a){a=a||this.gl;a.bindBuffer(a[this.options.target],null)}},{key:"destroy",value:function(){this.buffer=null}}]);return a}(),Jd={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FLOAT:4},Kd=function(){function a(b){z(this,a);this.options=b;this.attributes=b.attributes;this.gl=b.gl;this.program=b.program;for(b=this.stride=0;b<
this.attributes.length;b++)this.stride+=Jd[this.attributes[b].type]*this.attributes[b].size}B(a,[{key:"setVertexAttribPointers",value:function(){for(var a=this.gl,d=this.program,c=0;c<this.attributes.length;c++){var e=this.attributes[c],g=d.attributes[e.name];void 0!==g&&(e.buffer.bind(a),a.vertexAttribPointer(g,e.size,a[e.type],e.normalize||!1,void 0!==e.stride?e.stride:this.stride,e.offset),a.enableVertexAttribArray(g))}}},{key:"bind",value:function(){this.setVertexAttribPointers()}},{key:"destroy",
value:function(){}}]);return a}(),T=function e(b,d,c){z(this,e);d=d||b.canvas.width;c=c||b.canvas.height;var g=b.createFramebuffer(),f=b.createTexture();b.bindTexture(b.TEXTURE_2D,f);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,d,c,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);g.texture=
f;var h=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,h);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,d,c);g.depthBuffer=h;b.bindFramebuffer(b.FRAMEBUFFER,g);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,f,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,h);d=b.checkFramebufferStatus(b.FRAMEBUFFER);b.FRAMEBUFFER_COMPLETE===d&&(b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null),b.bindRenderbuffer(b.RENDERBUFFER,
null),this.framebuffer=g)},Qa=function(){function b(d){z(this,b);this.options={};aa(this.options,d);this.vertex=[-1,1,0,-1,-1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0];this.sampleCoord=[0,1,0,0,1,1,1,1,0,0,1,0]}B(b,[{key:"getOptions",value:function(){return this.options}},{key:"onResize",value:function(b){}},{key:"render",value:function(b){var c=b.gl;b=b.texture;var e=this.programSample;c.useProgram(e.program);var d=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,d);var f=[-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,
0];c.bufferData(c.ARRAY_BUFFER,new Float32Array(f),c.STATIC_DRAW);c.enableVertexAttribArray(e.attributes.aPos);c.vertexAttribPointer(e.attributes.aPos,3,c.FLOAT,!1,0,0);d=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,d);c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,1,1,0,0,1,0]),c.STATIC_DRAW);c.enableVertexAttribArray(e.attributes.aTextureCoord);c.vertexAttribPointer(e.attributes.aTextureCoord,2,c.FLOAT,!1,0,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,b);c.uniform1i(e.uniforms.uSampler,
0);c.drawArrays(c.TRIANGLES,0,f.length/3)}}]);return b}();(function(b){function d(b){z(this,d);return R(this,(d.__proto__||P(d)).call(this,b))}S(d,b);B(d,[{key:"getProgram",value:function(b){this.programSample||(this.programSample=new ba(b,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){float fStep=1.0/512.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;gl_FragColor=blurSample;}"}),
this.vertexBuffer=new kb({gl:b,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new kb({gl:b,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord)),this.vertexArray=new Kd({gl:b,program:this.programSample,attributes:[{stride:12,name:"aPos",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"aTextureCoord",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}]}));
return this.programSample}},{key:"render",value:function(b){var c=b.gl;b=b.texture;c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);var d=this.getProgram(c);d.use(c);this.vertexArray.bind();c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,b);c.uniform1i(d.uniforms.uSampler,1);c.drawArrays(c.TRIANGLES,0,this.vertex.length/3)}}]);return d})(Qa);(function(b){function d(b){z(this,d);return R(this,(d.__proto__||P(d)).call(this,b))}S(d,b);B(d,[{key:"getProgram",value:function(b){this.programBright||
(this.programBright=new ba(b,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-(1.0-threshold)/5.0));float brightness=dot(color.rgb,vec3(0.2126,0.7152,0.0722));if(brightness>threshold){color=lightColor;}else{color=vec4(0.0);}gl_FragColor=color;}"}));
this.programBloom||(this.programBloom=new ba(b,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"}));
this.programResult||(this.programResult=new ba(b,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord);vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"}));
return{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(b){this.collectBrightBuffer=new T(b);this.bloomBuffer=new T(b)}},{key:"getExtraFbo",value:function(b){this.collectBrightBuffer||(this.collectBrightBuffer=new T(b));this.bloomBuffer||(this.bloomBuffer=new T(b));return{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(b){var c=b.gl,d=
b.texture;b=b.fbo;var f=this.getOptions();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);var h=this.getProgram(c),k=h.programBright,l=h.programBloom;h=h.programResult;var p=this.getExtraFbo(c),m=p.collectBrightBuffer;p=p.bloomBuffer;var n=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,n);c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.vertex),c.STATIC_DRAW);c.enableVertexAttribArray(k.attributes.aPos);c.vertexAttribPointer(k.attributes.aPos,3,c.FLOAT,!1,0,0);c.enableVertexAttribArray(l.attributes.aPos);
c.vertexAttribPointer(l.attributes.aPos,3,c.FLOAT,!1,0,0);c.enableVertexAttribArray(h.attributes.aPos);c.vertexAttribPointer(h.attributes.aPos,3,c.FLOAT,!1,0,0);n=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,n);c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.sampleCoord),c.STATIC_DRAW);c.enableVertexAttribArray(k.attributes.aTextureCoord);c.vertexAttribPointer(k.attributes.aTextureCoord,2,c.FLOAT,!1,0,0);c.enableVertexAttribArray(l.attributes.aTextureCoord);c.vertexAttribPointer(l.attributes.aTextureCoord,
2,c.FLOAT,!1,0,0);c.enableVertexAttribArray(h.attributes.aTextureCoord);c.vertexAttribPointer(h.attributes.aTextureCoord,2,c.FLOAT,!1,0,0);c.useProgram(k.program);c.bindFramebuffer(c.FRAMEBUFFER,m);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,d);c.uniform1i(k.uniforms.uSampler,1);c.uniform1f(k.uniforms.threshold,f.threshold||0);c.drawArrays(c.TRIANGLES,0,this.vertex.length/3);c.useProgram(l.program);c.bindFramebuffer(c.FRAMEBUFFER,
p);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,m.texture);c.uniform1i(l.uniforms.uSampler,1);c.uniform1i(l.uniforms.isVertical,!0);c.uniform1f(l.uniforms.blurSize,f.blurSize||2);c.uniform1f(l.uniforms.devicePixelRatio,window.devicePixelRatio);c.uniform2fv(l.uniforms.canvasSize,[c.canvas.width,c.canvas.height]);c.drawArrays(c.TRIANGLES,0,this.vertex.length/3);c.useProgram(l.program);c.bindFramebuffer(c.FRAMEBUFFER,m);c.clearColor(0,
0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,p.texture);c.uniform1i(l.uniforms.uSampler,1);c.uniform1i(l.uniforms.isVertical,!1);c.uniform1f(l.uniforms.blurSize,f.blurSize||2);c.uniform1f(l.uniforms.devicePixelRatio,window.devicePixelRatio);c.uniform2fv(l.uniforms.canvasSize,[c.canvas.width,c.canvas.height]);c.drawArrays(c.TRIANGLES,0,this.vertex.length/3);c.useProgram(h.program);c.bindFramebuffer(c.FRAMEBUFFER,b);c.clearColor(0,0,0,
0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,d);c.uniform1i(h.uniforms.originalTexture,1);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,m.texture);c.uniform1i(h.uniforms.bloomTexture,0);c.drawArrays(c.TRIANGLES,0,this.vertex.length/3);c.bindBuffer(c.ARRAY_BUFFER,null);c.useProgram(null)}}]);return d})(Qa);(function(b){function d(b){z(this,d);return R(this,(d.__proto__||P(d)).call(this,b))}S(d,b);B(d,[{key:"getProgram",value:function(b){this.programBright||
(this.programBright=new ba(b,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-threshold));gl_FragColor=lightColor;}"}));this.programBloom||(this.programBloom=new ba(b,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",
fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"}));
this.programResult||(this.programResult=new ba(b,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;uniform float toneScale;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord)*toneScale;vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"}));
return{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(b){this.collectBrightBuffer=new T(b);this.bloomBuffer=new T(b)}},{key:"getExtraFbo",value:function(b){this.collectBrightBuffer||(this.collectBrightBuffer=new T(b));this.bloomBuffer||(this.bloomBuffer=new T(b));return{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(b){var c=b.gl,d=
b.texture;b=b.fbo;var f=this.getOptions(),h="clarity"in f?f.clarity:1;h=Math.max(0,h);h=Math.min(1,h);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);var k=this.getProgram(c),l=k.programBright,p=k.programBloom;k=k.programResult;var m=this.getExtraFbo(c),n=m.collectBrightBuffer;m=m.bloomBuffer;var r=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,r);c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.vertex),c.STATIC_DRAW);c.enableVertexAttribArray(l.attributes.aPos);c.vertexAttribPointer(l.attributes.aPos,
3,c.FLOAT,!1,0,0);c.enableVertexAttribArray(p.attributes.aPos);c.vertexAttribPointer(p.attributes.aPos,3,c.FLOAT,!1,0,0);c.enableVertexAttribArray(k.attributes.aPos);c.vertexAttribPointer(k.attributes.aPos,3,c.FLOAT,!1,0,0);r=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,r);c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.sampleCoord),c.STATIC_DRAW);c.enableVertexAttribArray(l.attributes.aTextureCoord);c.vertexAttribPointer(l.attributes.aTextureCoord,2,c.FLOAT,!1,0,0);c.enableVertexAttribArray(p.attributes.aTextureCoord);
c.vertexAttribPointer(p.attributes.aTextureCoord,2,c.FLOAT,!1,0,0);c.enableVertexAttribArray(k.attributes.aTextureCoord);c.vertexAttribPointer(k.attributes.aTextureCoord,2,c.FLOAT,!1,0,0);c.useProgram(l.program);c.bindFramebuffer(c.FRAMEBUFFER,n);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,d);c.uniform1i(l.uniforms.uSampler,1);c.uniform1f(l.uniforms.threshold,f.threshold||0);c.drawArrays(c.TRIANGLES,0,this.vertex.length/
3);c.useProgram(p.program);c.bindFramebuffer(c.FRAMEBUFFER,m);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,n.texture);c.uniform1i(p.uniforms.uSampler,1);c.uniform1i(p.uniforms.isVertical,!0);c.uniform1f(p.uniforms.blurSize,f.blurSize||2);c.uniform1f(p.uniforms.devicePixelRatio,window.devicePixelRatio);c.uniform2fv(p.uniforms.canvasSize,[c.canvas.width,c.canvas.height]);c.drawArrays(c.TRIANGLES,0,this.vertex.length/3);c.useProgram(p.program);
c.bindFramebuffer(c.FRAMEBUFFER,n);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,m.texture);c.uniform1i(p.uniforms.uSampler,1);c.uniform1i(p.uniforms.isVertical,!1);c.uniform1f(p.uniforms.blurSize,f.blurSize||2);c.uniform1f(p.uniforms.devicePixelRatio,window.devicePixelRatio);c.uniform2fv(p.uniforms.canvasSize,[c.canvas.width,c.canvas.height]);c.drawArrays(c.TRIANGLES,0,this.vertex.length/3);c.useProgram(k.program);c.bindFramebuffer(c.FRAMEBUFFER,
b);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,d);c.uniform1i(k.uniforms.originalTexture,1);c.uniform1f(k.uniforms.toneScale,h);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,n.texture);c.uniform1i(k.uniforms.bloomTexture,0);c.drawArrays(c.TRIANGLES,0,this.vertex.length/3);c.bindBuffer(c.ARRAY_BUFFER,null);c.useProgram(null)}}]);return d})(Qa);(function(b){function d(b){z(this,d);return R(this,(d.__proto__||P(d)).call(this,
b))}S(d,b);B(d,[{key:"getProgram",value:function(b){this.programSample||(this.programSample=new ba(b,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;void main(){float fStep=1.0/312.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;float desX=abs((gl_FragCoord.x-canvasSize.x/2.0)/(canvasSize.x/2.0));float desY=abs((gl_FragCoord.y-canvasSize.y/2.0)/(canvasSize.y/2.0));float factor=max(desX,desY);gl_FragColor=(sample22*(1.0-factor)+blurSample*factor);}"}));
return this.programSample}},{key:"render",value:function(b){var c=b.gl;b=b.texture;var d=this.getProgram(c);c.useProgram(d.program);var f=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,f);c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.vertex),c.STATIC_DRAW);c.enableVertexAttribArray(d.attributes.aPos);c.vertexAttribPointer(d.attributes.aPos,3,c.FLOAT,!1,0,0);f=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,f);c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.sampleCoord),c.STATIC_DRAW);c.enableVertexAttribArray(d.attributes.aTextureCoord);
c.vertexAttribPointer(d.attributes.aTextureCoord,2,c.FLOAT,!1,0,0);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,b);c.uniform1i(d.uniforms.uSampler,1);c.uniform2fv(d.uniforms.canvasSize,[c.canvas.width,c.canvas.height]);c.drawArrays(c.TRIANGLES,0,this.vertex.length/3)}}]);return d})(Qa);(function(){function b(d){z(this,b);this.gl=d;this.effects=[];this.initFbo()}B(b,[{key:"addEffect",value:function(b){this.effects.push(b)}},{key:"removeEffect",value:function(b){}},{key:"setEffects",value:function(b){this.effects=
b}},{key:"onResize",value:function(){this.initFbo();var b=this.gl,c=this.effects;if(c&&1<c.length)for(var e=1;e<c.length;e++){var g=c[e];g.onResize&&g.onResize(b)}}},{key:"initFbo",value:function(){var b=this.gl;this.fbo=[new T(b),new T(b)]}},{key:"render",value:function(){var b=this.gl,c=this.effects;if(c&&0<c.length)for(var e={},g=0;g<c.length;g++){var f=this.fbo[g%2].framebuffer;g===c.length-1&&(f=null);b.bindFramebuffer(b.FRAMEBUFFER,f);var h=[0,0,0,0];b.clearColor(h[0],h[1],h[2],h[3]);b.clear(b.COLOR_BUFFER_BIT|
b.DEPTH_BUFFER_BIT);c[g].render({isPickRender:!1,gl:b,texture:e.texture,fbo:f});e=f}}}]);return b})();var jc=function(b){function d(b){z(this,d);b=R(this,(d.__proto__||P(d)).call(this,b));b.layerType="ThreeLayer";return b}S(d,b);B(d,[{key:"initialize",value:function(b){this.getOptions();var c=this.webglLayer.map.map;"three"===this.webglLayer.map.type?(this.camera=c.camera,this.scene=c.scene):(this.camera=new r.Camera,this.scene=new r.Scene);this.world=new r.Group;this.scene.add(this.world);"three"!==
this.webglLayer.map.type&&(this.camera.matrixAutoUpdate=!1,this.world.matrixAutoUpdate=!1,this.renderer=new r.WebGLRenderer({alpha:!0,antialias:!0,canvas:b.canvas,context:b}),this.renderer.autoClear=!1)}},{key:"add",value:function(b,d){var c=this.getOptions();this.scene.add(b);var e=[0,0];!0===c.enabledPointOffset&&(e=this.getPointOffset());d?(c=new r.Group,c.isGeoGroup=!0,c.object=b,c.point=d,c.add(b),c.position.x=d.lng-e[0],c.position.y=d.lat-e[1],c.position.z=b.position.z,this.world.add(c)):this.world.add(b);
this.update()}},{key:"update",value:function(){this.webglLayer.render()}},{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getRenderer",value:function(){return this.renderer}},{key:"getWorld",value:function(){return this.world}},{key:"updatePoint",value:function(b,d){for(var c=this.world.children,e=0;e<c.length;e++)if(c[e].isGeoGroup&&c[e].object===b){var h=c[e];h.position.x=d.lng;h.position.y=d.lat;h.position.z=b.position.z}}},{key:"remove",
value:function(b){this.world.remove(b);for(var c=this.world.children,d=0;d<c.length;d++)c[d].children&&0<c[d].children.length&&c[d].children[0]===b&&this.world.remove(c[d]);this.update()}},{key:"updateCamera",value:function(){var b=this.world,d=this.map.getZoomUnits();b=b.children;for(var g=0;g<b.length;g++)b[g].point&&b[g].scale.set(d,d,d)}},{key:"render",value:function(b){var c=this.getOptions();if(b){if(!this.webglLayer.map.map.camera){this.updateCamera();var d=this.getPointOffset(),f=(new r.Matrix4).fromArray(b.viewMatrix);
this.camera.projectionMatrix=(new r.Matrix4).fromArray(b.projectionMatrix);!0===c.enabledPointOffset?this.world.matrix=f:(b=(new r.Matrix4).makeTranslation(-d[0],-d[1],0),this.world.matrix=f.multiply(b));this.renderer.state.reset();this.postProcessing?this.postProcessing.render():this.renderer.render(this.scene,this.camera)}}else this.update()}}]);return d}(function(b){function d(b){z(this,d);b=R(this,(d.__proto__||P(d)).call(this,b));b.pickedColor=[-1,-1,-1];return b}S(d,b);B(d,[{key:"getCommonDefaultOptions",
value:function(){return{repeat:!1,enablePicked:!1,autoSelect:!1,selectedIndex:-1,selectedColor:"rgba(20, 20, 200, 1.0)"}}},{key:"commonInitialize",value:function(b){var c=this.getOptions();this.gl=b;c.enablePicked&&(this.pickBuffer=new kb({gl:b,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}))}},{key:"getCommonAttributes",value:function(){var b=[];this.getOptions().enablePicked&&b.push({name:"aPickColor",buffer:this.pickBuffer,size:3,type:"FLOAT",stride:12,offset:0});return b}},{key:"normizedColor",value:function(b){var c=
b;b instanceof Array||(c=A(b).unitArray());void 0===c[3]&&(c[3]=1);return c}},{key:"normizedPoint",value:function(b){if(!b||!b[0]||!b[1])return[0,0,0];var c=this.getPointOffset(),d=Number(b[0]),f=Number(b[1]);-180<=d&&180>=d&&-90<=f&&90>=f&&(f=this.webglLayer.map.lnglatToMercator(d,f),d=f[0],f=f[1]);var h=Number(b[2])||0;this.webglLayer&&"cesium"===this.webglLayer.options.mapType&&window.Cesium?(d=this.convertLngLat([d,f]),h=window.Cesium.Cartesian3.fromDegrees(d[0],d[1],h),d=h.x,f=h.y,h=h.z):this.webglLayer&&
"bmapgl"===this.webglLayer.options.mapType&&"B_EARTH_MAP"===this.webglLayer.map.map.mapType&&(d=this.convertLngLat([d,f]),h=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:d[0],lat:d[1]}),d=h.x,f=h.y,h=h.z);return 3<b.length?[d-c[0],f-c[1],h].concat(fc(b.slice(3))):[d-c[0],f-c[1],h]}},{key:"convertLngLat",value:function(b){return[b[0]/2.003750834E7*180,180/Math.PI*(2*Math.atan(Math.exp(b[1]/2.003750834E7*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",value:function(){var b=[0,
0],d=this.getOptions();this.webglLayer&&this.webglLayer.options.pointOffset?b=this.webglLayer.options.pointOffset:d.pointOffset&&(b=d.pointOffset);return b}},{key:"indexToRgb",value:function(b){b++;var c=Math.floor(b/65536);b-=65536*c;var d=Math.floor(b/256);return[b-256*d,d,c]}},{key:"rgbToIndex",value:function(b){return b[0]+256*b[1]+65536*b[2]-1}},{key:"getCommonUniforms",value:function(b){b=b.isPickRender;var c=this.getOptions(),d={};if(c.enablePicked){var f=c.autoSelect?this.pickedColor:this.indexToRgb(c.selectedIndex||
-1);d=aa(d,{uSelectedColor:this.normizedColor(c.selectedColor),uEnablePicked:c.enablePicked,uPickedColor:f.map(function(b){return b/255}),uIsPickRender:!!b})}return d}},{key:"pick",value:function(b,d){var c=this.gl;this.webglLayer.saveFramebuffer();this.webglLayer.bindFramebuffer(this.webglLayer.pickFBO);this.webglLayer.clear();this.render({gl:c,isPickRender:!0,matrix:this.webglLayer.matrix,projectionMatrix:this.webglLayer.projectionMatrix,viewMatrix:this.webglLayer.viewMatrix,orthoMatrix:this.webglLayer.orthoMatrix});
var e=new Uint8Array(4);c.readPixels(b*window.devicePixelRatio,c.canvas.height-d*window.devicePixelRatio,1,1,c.RGBA,c.UNSIGNED_BYTE,e);b=this.rgbToIndex(e);this.pickedColor=[e[0],e[1],e[2]];this.webglLayer.restoreFramebuffer();return{dataIndex:b,dataItem:this.data[b]}}},{key:"setGLState",value:function(b){this.webglLayer.stateManager.setState(b)}},{key:"addMultipleCoords",value:function(b,d,g){if(!this.options.repeat||!this.webglLayer||"bmapgl"!==this.webglLayer.options.mapType||"B_EARTH_MAP"===this.webglLayer.map.map.mapType)return[b];
var c=this.webglLayer.map.map;d=d||c.getZoom();var e=g?c.worldSize(d):4.007545274461451E7;d=function(b){return[[b[0]-e,b[1],b[2]||0],[b[0]+e,b[1],b[2]||0]]};if(b instanceof Array&&!(b[0]instanceof Array))return d=d(b),d=hc(d,2),[b,d[0],d[1]];g=[];c=[];for(var k=0;k<b.length;k++){var l=d(b[k]);l=hc(l,2);var p=l[1];g.push(l[0]);c.push(p)}return[b,g,c]}}]);return d}(gc)),lb=function(b){function d(b){z(this,d);var c=R(this,(d.__proto__||P(d)).call(this,b));c.layerType="threeLayer";c.setOptions(b);return c}
S(d,b);B(d,[{key:"setWebglLayer",value:function(b){b.threeLayer||(b.threeLayer=new jc({enabledPointOffset:!0,webglLayer:b}));this.threeLayer=b.threeLayer}},{key:"getPointOffset",value:function(){return this.threeLayer.getPointOffset()}},{key:"getThreeLayer",value:function(){return this.threeLayer}}]);return d}(gc),Ld=function(b){function d(b){z(this,d);return R(this,(d.__proto__||P(d)).call(this,b))}S(d,b);B(d,[{key:"initialize",value:function(b){var c=b.camera,d=b.renderer;if(!this._initialize){this.scene=
b.scene;this.camera=c;this.renderer=d;b=this.options.passes;this._initialize=!0;this.renderScene=new Ra.RenderPass(this.scene,this.camera);c=new lc.EffectComposer(this.renderer);c.addPass(this.renderScene);this.passes=[];if(b)for(d=0;d<b.length;d++){var f=b[d];if("unrealBloom"===f.name){var h=new mb.UnrealBloomPass(new r.Vector2(window.innerWidth,window.innerHeight),1.5,.4,.85),k;for(k in f)h[k]=f[k];c.addPass(h)}}this.composer=c}}},{key:"addRender",value:function(b){this.renderScene&&this.renderScene.addRender(b)}},
{key:"render",value:function(){this.composer.render(this.scene,this.camera)}}]);return d}(lb);mb.UnrealBloomPass.prototype.getSeperableBlurMaterial=function(b){return new r.ShaderMaterial({defines:{KERNEL_RADIUS:b,SIGMA:b},uniforms:{colorTexture:{value:null},texSize:{value:new r.Vector2(.5,.5)},direction:{value:new r.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }",
fragmentShader:"#include <common>            varying vec2 vUv;\n            uniform sampler2D colorTexture;\n            uniform vec2 texSize;            uniform vec2 direction;                        float gaussianPdf(in float x, in float sigma) {                return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;            }            void main() {\n                vec2 invSize = 1.0 / texSize;                float fSigma = float(SIGMA);                float weightSum = gaussianPdf(0.0, fSigma);                vec4 diffuseSum = texture2D( colorTexture, vUv).rgba * weightSum;                for( int i = 1; i < KERNEL_RADIUS; i ++ ) {                    float x = float(i);                    float w = gaussianPdf(x, fSigma);                    vec2 uvOffset = direction * invSize * x;                    vec4 sample1 = texture2D( colorTexture, vUv + uvOffset).rgba;                    vec4 sample2 = texture2D( colorTexture, vUv - uvOffset).rgba;                    diffuseSum += (sample1 + sample2) * w;                    weightSum += 2.0 * w;                }                gl_FragColor = vec4(diffuseSum/weightSum);\n            }"})};
Ra.RenderPass.prototype.addRender=function(b){this.renderCbk=b};Ra.RenderPass.prototype.render=function(b,d,c){d=b.autoClear;b.autoClear=!1;this.scene.overrideMaterial=this.overrideMaterial;if(this.clearColor){var e=b.getClearColor().getHex();var g=b.getClearAlpha();b.setClearColor(this.clearColor,this.clearAlpha)}this.clearDepth&&b.clearDepth();b.setRenderTarget(this.renderToScreen?null:c);this.clear&&b.clear(b.autoClearColor,b.autoClearDepth,b.autoClearStencil);b.render(this.scene,this.camera);
this.renderCbk&&this.renderCbk();this.clearColor&&b.setClearColor(e,g);this.scene.overrideMaterial=null;b.autoClear=d};var Md=function(b){function d(b){z(this,d);b=R(this,(d.__proto__||P(d)).call(this,b));b.time=0;b.autoUpdate=!0;return b}S(d,b);B(d,[{key:"getDefaultOptions",value:function(){return{totalRadian:Math.PI,color:16711680,radius:50,step:.1}}},{key:"initialize",value:function(b){this.threeLayer=b;this.addOverlay()}},{key:"onChanged",value:function(b,d){this.threeLayer&&(this.removeOverlay(),
this.addOverlay())}},{key:"onDestroy",value:function(){this.removeOverlay()}},{key:"render",value:function(){this.time+=this.options.step/10;1<this.time&&(this.time=0);for(var b=this.shapeMarker.children,d=0;d<b.length;d++)b[d].material.uniforms.periodRatio.value=this.time}},{key:"removeOverlay",value:function(){this.threeLayer.remove(this.shapeMarker)}},{key:"addOverlay",value:function(){this.shapeMarker=new r.Group;for(var b=this.threeLayer,d=this.getData(),g=0;g<d.length;g++){var f=b.normizedPoint(d[g].geometry.coordinates);
f=this.create3dCanvasRipple({originalData:d[g],normizedData:f});this.shapeMarker.add(f)}b.add(this.shapeMarker)}},{key:"create3dCanvasRipple",value:function(b){var c=this.options,d=c.totalRadian,f=c.color;c=c.size;var h=b.originalData;b=b.normizedData;"[object Function]"===Object.prototype.toString.call(f)&&(f=f(h));c="[object Function]"===Object.prototype.toString.call(c)?c(h):Number(c);h={totalRadian:{type:"f",value:d},glowColor:{type:"c",value:new r.Color(f)},radius:{type:"f",value:c},periodRatio:{type:"f",
value:0}};f=new r.Geometry;for(var k=d/(c/2),l=k;l<=d;l+=k){var p=c*Math.sin(l),m=c*Math.cos(l);f.vertices.push(new r.Vector3(0,0,l/d));f.vertices.push(new r.Vector3(m,p,l/d))}d=0;for(c=f.vertices.length;d<c-2;++d)f.faces.push(new r.Face3(d,d+1,d+3));d=new r.ShaderMaterial({uniforms:h,vertexShader:"varying vec4 vFragColor;varying vec4 vPosition;uniform float radius;uniform float totalRadian;uniform float periodRatio;uniform vec3 glowColor;void main(){float radian=radians(360.0*periodRatio);float s=sin(radian);float c=cos(radian);vec2 rotatedPostion=vec2(position.x*s+position.y*c,position.y*s-position.x*c);gl_Position=projectionMatrix*modelViewMatrix*vec4(rotatedPostion,0,1.0);vFragColor=vec4(glowColor,pow(position.z,1.3));}",
fragmentShader:"varying vec4 vFragColor;void main(){gl_FragColor=vFragColor;}",blending:r.NormalBlending,transparent:!0,depthWrite:!1});d=new r.Mesh(f,d);d.position.set(b[0],b[1],b[2]||0);return d}}]);return d}(lb);v(v.S+v.F*!V,"Object",{defineProperties:Bb});var Nd=w.Object,Od=function(b,d){return Nd.defineProperties(b,d)},Pd=q(function(b){b.exports={"default":Od,__esModule:!0}}),Qd=t(Pd),kc=q(function(b,d){(function(){function c(){this.positions=[];this.previous=[];this.next=[];this.side=[];this.width=
[];this.indices_array=[];this.uvs=[];this.counters=[];this.geometry=new f.BufferGeometry;this.widthCallback=null;this.matrixWorld=new f.Matrix4}function e(b,c,d,e,f){b=b.subarray||b.slice?b:b.buffer;d=d.subarray||d.slice?d:d.buffer;b=c?b.subarray?b.subarray(c,f&&c+f):b.slice(c,f&&c+f):b;if(d.set)d.set(b,e);else for(c=0;c<b.length;c++)d[c+e]=b[c];return d}function g(b){f.ShaderMaterial.call(this,{uniforms:aa({},f.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},
useAlphaMap:{value:0},color:{value:new f.Color(16777215)},opacity:{value:1},resolution:{value:new f.Vector2(1,1)},sizeAttenuation:{value:1},near:{value:1},far:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new f.Vector2(1,1)}}),vertexShader:f.ShaderChunk.meshline_vert,fragmentShader:f.ShaderChunk.meshline_frag});this.type="MeshLineMaterial";Qd(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},
set:function(b){this.uniforms.lineWidth.value=b}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(b){this.uniforms.map.value=b}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(b){this.uniforms.useMap.value=b}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(b){this.uniforms.alphaMap.value=b}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(b){this.uniforms.useAlphaMap.value=
b}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(b){this.uniforms.color.value=b}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(b){this.uniforms.opacity.value=b}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(b){this.uniforms.resolution.value.copy(b)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(b){this.uniforms.sizeAttenuation.value=
b}},near:{enumerable:!0,get:function(){return this.uniforms.near.value},set:function(b){this.uniforms.near.value=b}},far:{enumerable:!0,get:function(){return this.uniforms.far.value},set:function(b){this.uniforms.far.value=b}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(b){this.uniforms.dashArray.value=b;this.useDash=0!==b?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(b){this.uniforms.dashOffset.value=
b}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(b){this.uniforms.dashRatio.value=b}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(b){this.uniforms.useDash.value=b}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(b){this.uniforms.visibility.value=b}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(b){this.uniforms.alphaTest.value=
b}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(b){this.uniforms.repeat.value.copy(b)}}});this.setValues(b)}var f="undefined"!==typeof mc&&N||this.THREE;if(!f)throw Error("MeshLine requires three.js");c.prototype.setMatrixWorld=function(b){this.matrixWorld=b};c.prototype.setGeometry=function(b,c){this.widthCallback=c;this.positions=[];this.counters=[];if(b instanceof f.Geometry)for(var d=0;d<b.vertices.length;d++){var e=b.vertices[d];c=d/b.vertices.length;
this.positions.push(e.x,e.y,e.z);this.positions.push(e.x,e.y,e.z);this.counters.push(c);this.counters.push(c)}if(b instanceof Float32Array||b instanceof Array)for(d=0;d<b.length;d+=3)c=d/b.length,this.positions.push(b[d],b[d+1],b[d+2]),this.positions.push(b[d],b[d+1],b[d+2]),this.counters.push(c),this.counters.push(c);this.process()};c.prototype.raycast=function(){var b=new f.Matrix4,c=new f.Ray,d=new f.Sphere;return function(e,g){var h=e.linePrecision;h*=h;var k=this.geometry;null===k.boundingSphere&&
k.computeBoundingSphere();d.copy(k.boundingSphere);d.applyMatrix4(this.matrixWorld);if(!1!==e.ray.intersectSphere(d)){b.getInverse(this.matrixWorld);c.copy(e.ray).applyMatrix4(b);var l=new f.Vector3,p=new f.Vector3,m=new f.Vector3,r=new f.Vector3,v=this instanceof f.LineSegments?2:1;if(k instanceof f.BufferGeometry){var q=k.index,u=k.attributes;if(null!==q){k=q.array;u=u.position.array;q=0;for(var w=k.length-1;q<w;q+=v){var t=k[q+1];l.fromArray(u,3*k[q]);p.fromArray(u,3*t);t=c.distanceSqToSegment(l,
p,r,m);t>h||(r.applyMatrix4(this.matrixWorld),t=e.ray.origin.distanceTo(r),t<e.near||t>e.far||g.push({distance:t,point:m.clone().applyMatrix4(this.matrixWorld),index:q,face:null,faceIndex:null,object:this}))}}else for(u=u.position.array,q=0,w=u.length/3-1;q<w;q+=v)l.fromArray(u,3*q),p.fromArray(u,3*q+3),t=c.distanceSqToSegment(l,p,r,m),t>h||(r.applyMatrix4(this.matrixWorld),t=e.ray.origin.distanceTo(r),t<e.near||t>e.far||g.push({distance:t,point:m.clone().applyMatrix4(this.matrixWorld),index:q,face:null,
faceIndex:null,object:this}))}else if(k instanceof f.Geometry)for(l=k.vertices,p=l.length,q=0;q<p-1;q+=v)t=c.distanceSqToSegment(l[q],l[q+1],r,m),t>h||(r.applyMatrix4(this.matrixWorld),t=e.ray.origin.distanceTo(r),t<e.near||t>e.far||g.push({distance:t,point:m.clone().applyMatrix4(this.matrixWorld),index:q,face:null,faceIndex:null,object:this}))}}}();c.prototype.compareV3=function(b,c){b*=6;c*=6;return this.positions[b]===this.positions[c]&&this.positions[b+1]===this.positions[c+1]&&this.positions[b+
2]===this.positions[c+2]};c.prototype.copyV3=function(b){b*=6;return[this.positions[b],this.positions[b+1],this.positions[b+2]]};c.prototype.process=function(){var b=this.positions.length/6;this.previous=[];this.next=[];this.side=[];this.width=[];this.indices_array=[];this.uvs=[];for(var c=0;c<b;c++)this.side.push(1),this.side.push(-1);for(c=0;c<b;c++){var d=this.widthCallback?this.widthCallback(c/(b-1)):1;this.width.push(d);this.width.push(d)}for(c=0;c<b;c++)this.uvs.push(c/(b-1),0),this.uvs.push(c/
(b-1),1);d=this.compareV3(0,b-1)?this.copyV3(b-2):this.copyV3(0);this.previous.push(d[0],d[1],d[2]);this.previous.push(d[0],d[1],d[2]);for(c=0;c<b-1;c++)d=this.copyV3(c),this.previous.push(d[0],d[1],d[2]),this.previous.push(d[0],d[1],d[2]);for(c=1;c<b;c++)d=this.copyV3(c),this.next.push(d[0],d[1],d[2]),this.next.push(d[0],d[1],d[2]);d=this.compareV3(b-1,0)?this.copyV3(1):this.copyV3(b-1);this.next.push(d[0],d[1],d[2]);this.next.push(d[0],d[1],d[2]);for(c=0;c<b-1;c++)d=2*c,this.indices_array.push(d,
d+1,d+2),this.indices_array.push(d+2,d+1,d+3);this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),
this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new f.BufferAttribute(new Float32Array(this.positions),3),previous:new f.BufferAttribute(new Float32Array(this.previous),3),next:new f.BufferAttribute(new Float32Array(this.next),3),side:new f.BufferAttribute(new Float32Array(this.side),1),
width:new f.BufferAttribute(new Float32Array(this.width),1),uv:new f.BufferAttribute(new Float32Array(this.uvs),2),index:new f.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new f.BufferAttribute(new Float32Array(this.counters),1)};this.geometry.addAttribute("position",this.attributes.position);this.geometry.addAttribute("previous",this.attributes.previous);this.geometry.addAttribute("next",this.attributes.next);this.geometry.addAttribute("side",this.attributes.side);this.geometry.addAttribute("width",
this.attributes.width);this.geometry.addAttribute("uv",this.attributes.uv);this.geometry.addAttribute("counters",this.attributes.counters);this.geometry.setIndex(this.attributes.index)};c.prototype.advance=function(b){var c=this.attributes.position.array,d=this.attributes.next.array,f=c.length;e(c,0,this.attributes.previous.array,0,f);e(c,6,c,0,f-6);c[f-6]=b.x;c[f-5]=b.y;c[f-4]=b.z;c[f-3]=b.x;c[f-2]=b.y;c[f-1]=b.z;e(c,6,d,0,f-6);d[f-6]=b.x;d[f-5]=b.y;d[f-4]=b.z;d[f-3]=b.x;d[f-2]=b.y;d[f-1]=b.z;this.attributes.position.needsUpdate=
!0;this.attributes.previous.needsUpdate=!0;this.attributes.next.needsUpdate=!0};f.ShaderChunk.meshline_vert=["",f.ShaderChunk.logdepthbuf_pars_vertex,f.ShaderChunk.fog_pars_vertex,"\r\nattribute vec3 previous;\r\nattribute vec3 next;\r\nattribute float side;\r\nattribute float width;\r\nattribute float counters;\r\n\r\nuniform vec2 resolution;\r\nuniform float lineWidth;\r\nuniform vec3 color;\r\nuniform float opacity;\r\nuniform float near;\r\nuniform float far;\r\nuniform float sizeAttenuation;\r\n\r\nvarying vec2 vUV;\r\nvarying vec4 vColor;\r\nvarying float vCounters;\r\n\r\nvec2 fix( vec4 i, float aspect ) {\r\n\r\n    vec2 res = i.xy / i.w;\r\n    res.x *= aspect;\r\n\t vCounters = counters;\r\n    return res;\r\n\r\n}\r\n\r\nvoid main() {\r\n\r\n    float aspect = resolution.x / resolution.y;\r\n    float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);\r\n\r\n    vColor = vec4( color, opacity );\r\n    vUV = uv;\r\n\r\n    mat4 m = projectionMatrix * modelViewMatrix;\r\n    vec4 finalPosition = m * vec4( position, 1.0 );\r\n    vec4 prevPos = m * vec4( previous, 1.0 );\r\n    vec4 nextPos = m * vec4( next, 1.0 );\r\n\r\n    vec2 currentP = fix( finalPosition, aspect );\r\n    vec2 prevP = fix( prevPos, aspect );\r\n    vec2 nextP = fix( nextPos, aspect );\r\n\r\n    float pixelWidth = finalPosition.w * pixelWidthRatio;\r\n    float w = 1.8 * pixelWidth * lineWidth * width;\r\n\r\n    if( sizeAttenuation == 1. ) {\r\n        w = 1.8 * lineWidth * width;\r\n    }\r\n\r\n    vec2 dir;\r\n    if( nextP == currentP ) dir = normalize( currentP - prevP );\r\n    else if( prevP == currentP ) dir = normalize( nextP - currentP );\r\n    else {\r\n        vec2 dir1 = normalize( currentP - prevP );\r\n        vec2 dir2 = normalize( nextP - currentP );\r\n        dir = normalize( dir1 + dir2 );\r\n\r\n        vec2 perp = vec2( -dir1.y, dir1.x );\r\n        vec2 miter = vec2( -dir.y, dir.x );\r\n        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );\r\n\r\n    }\r\n\r\n    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;\r\n    vec2 normal = vec2( -dir.y, dir.x );\r\n    normal.x /= aspect;\r\n    normal *= .5 * w;\r\n\r\n    vec4 offset = vec4( normal * side, 0.0, 1.0 );\r\n    finalPosition.xy += offset.xy;\r\n\r\n    gl_Position = finalPosition;\r\n",
f.ShaderChunk.logdepthbuf_vertex,f.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",f.ShaderChunk.fog_vertex,"}"].join("\r\n");f.ShaderChunk.meshline_frag=["",f.ShaderChunk.fog_pars_fragment,f.ShaderChunk.logdepthbuf_pars_fragment,"\r\nuniform sampler2D map;\r\nuniform sampler2D alphaMap;\r\nuniform float useMap;\r\nuniform float useAlphaMap;\r\nuniform float useDash;\r\nuniform float dashArray;\r\nuniform float dashOffset;\r\nuniform float dashRatio;\r\nuniform float visibility;\r\nuniform float alphaTest;\r\nuniform vec2 repeat;\r\n\r\nvarying vec2 vUV;\r\nvarying vec4 vColor;\r\nvarying float vCounters;\r\n\r\nvoid main() {\r\n",
f.ShaderChunk.logdepthbuf_fragment,"\r\n    vec4 c = vColor;\r\n    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );\r\n    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;\r\n    if( c.a < alphaTest ) discard;\r\n    if( useDash == 1. ){\r\n        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));\r\n    }\r\n    gl_FragColor = c;\r\n    gl_FragColor.a *= step(vCounters, visibility);\r\n",f.ShaderChunk.fog_fragment,"}"].join("\r\n");g.prototype=
gd(f.ShaderMaterial.prototype);g.prototype.constructor=g;g.prototype.isMeshLineMaterial=!0;g.prototype.copy=function(b){f.ShaderMaterial.prototype.copy.call(this,b);this.lineWidth=b.lineWidth;this.map=b.map;this.useMap=b.useMap;this.alphaMap=b.alphaMap;this.useAlphaMap=b.useAlphaMap;this.color.copy(b.color);this.opacity=b.opacity;this.resolution.copy(b.resolution);this.sizeAttenuation=b.sizeAttenuation;this.near=b.near;this.far=b.far;this.dashArray.copy(b.dashArray);this.dashOffset.copy(b.dashOffset);
this.dashRatio.copy(b.dashRatio);this.useDash=b.useDash;this.visibility=b.visibility;this.alphaTest=b.alphaTest;this.repeat.copy(b.repeat);return this};b.exports&&(d=b.exports={MeshLine:c,MeshLineMaterial:g});d.MeshLine=c;d.MeshLineMaterial=g}).call(sc)}),Rd=kc.MeshLine,Sd=kc.MeshLineMaterial,Td=function(b){function d(b){z(this,d);b=R(this,(d.__proto__||P(d)).call(this,b));b.staticDashArray=2;b.time=0;b.autoUpdate=!0;return b}S(d,b);B(d,[{key:"getDefaultOptions",value:function(){return{color:16777215,
textureColor:16777215,textureWidth:10,textureLength:30,step:.1}}},{key:"initialize",value:function(b){this.threeLayer=b;this.addOverlay()}},{key:"onChanged",value:function(b,d){this.threeLayer&&(this.removeOverlay(),this.addOverlay())}},{key:"onDestroy",value:function(){this.removeOverlay()}},{key:"render",value:function(){var b=this.getOptions(),d=b.textureWidth,g=b.style;b=b.step/10;this.time+=b;2<this.time&&(this.time=0);for(var f=this.flyLine.children,h=0;h<f.length;h++){var k=f[h],l=k.hash;k.children[0].material.uniforms.lineWidth.value=
d*(1+.2*Math.sin(5*this.time));k.children[0].material.uniforms.dashOffset.value="chaos"===g?k.children[0].material.uniforms.dashOffset.value-b:(this.staticDashArray+l)*(1-this.time/2)}}},{key:"removeOverlay",value:function(){this.threeLayer.remove(this.flyLine)}},{key:"addOverlay",value:function(){var b=this;this.flyLine=new r.Group;var d=this.threeLayer,g=new r.TextureLoader,f=this.getData();g.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAABZCAQAAAD/AkAkAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAOGtpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTktMDYtMjdUMTk6MzE6MTUrMDg6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxOS0wOC0xOVQxNjo1Nzo1MCswODowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTktMDgtMTlUMTY6NTc6NTArMDg6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjE8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5Eb3QgR2FpbiAxNSU8L3Bob3Rvc2hvcDpJQ0NQcm9maWxlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjQ5MmI1NTQ1LWIwNmQtNGI0Yi1iMWExLTZiN2NiNzExNzA5MjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDo0OTJiNTU0NS1iMDZkLTRiNGItYjFhMS02YjdjYjcxMTcwOTI8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDo0OTJiNTU0NS1iMDZkLTRiNGItYjFhMS02YjdjYjcxMTcwOTI8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NDkyYjU1NDUtYjA2ZC00YjRiLWIxYTEtNmI3Y2I3MTE3MDkyPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE5LTA2LTI3VDE5OjMxOjE1KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+ODk8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+ODk8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0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",
function(c){for(var e=0;e<f.length;e++){var g=f[e].geometry.coordinates.map(function(b){return new (Function.prototype.bind.apply(r.Vector3,[null].concat(fc(d.normizedPoint(b)))))});g=b.createFlyLine({originalData:f[e],curveData:g,texture:c});b.flyLine.add(g)}d.add(b.flyLine)})}},{key:"createFlyLine",value:function(b){var c=this.options,d=c.color,f=c.textureColor,h=c.textureWidth,k=b.originalData,l=b.curveData;b=b.texture;var p=Math.random();c=Math.min(1,1-c.textureLength/100);c=Math.max(0,c);"[object Function]"===
Object.prototype.toString.call(d)&&(d=d(k));"[object Function]"===Object.prototype.toString.call(f)&&(f=f(k));k=new r.Geometry;k.vertices=l;k.verticesNeedUpdate=!0;d=new r.LineBasicMaterial({linewidth:1,color:new r.Color(d),blending:r.AdditiveBlending,depthTest:!0,depthWrite:!1,transparent:!0,opacity:.3,linecap:"round",linejoin:"round"});d=new r.Line(k,d);d.renderDepth=!1;d.hash=p;k=new Rd;for(var m=new r.Geometry,n=0;n<l.length;n++){var q=l[n];m.vertices.push(new r.Vector3(q.x,q.y,q.z))}k.setGeometry(m,
function(b){return 1-b});f=new Sd({map:b,useMap:!0,color:new r.Color(f),opacity:1,dashArray:this.staticDashArray+p,dashOffset:0,dashRatio:c,sizeAttenuation:!0,lineWidth:h,depthWrite:!1,depthTest:!0,alphaTest:!1,transparent:!0,blending:r.AdditiveBlending,side:r.DoubleSide});f=new r.Mesh(k.geometry,f);d.add(f);return d}}]);return d}(lb);D.THREE=r;D.PostProcessing=Ld;D.FanLayer=Md;D.FlyLineLayer=Td;D.ThreeLayer=jc;Object.defineProperty(D,"__esModule",{value:!0})});
